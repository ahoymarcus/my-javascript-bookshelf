(()=>{"use strict";function t(t,e,o,n){this.title=t,this.author=e,this.coauthors=[],this.numVolumes=1,this.publisher="Fantastic Bookshelf",this.bookType="hard corver",this.bookCategory="fiction",this.edition=1,this.releaseYear=new Date,this.numPages=o,this.bookState=n,this.date=new Date,this.lastChange=new Date,this.bookDesc="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed pellentesque, dolor ac suscipit volutpat, urna odio suscipit tortor, ut condimentum metus nulla sodales nisl. Nullam porttitor finibus metus ut faucibus."}t.prototype.info=function(){return'The book "'.concat(this.title,'" by ').concat(this.author," has ").concat(this.numPages," pages, in ").concat(this.numVolumes," volume(s). It is a ").concat(this.bookCategory.toUpperCase()," publication by ").concat(this.publisher,' editors, released in "').concat(this.bookType,'" format, in ').concat(this.releaseYear.getFullYear(),' - "').concat(this.bookState.toUpperCase(),'" ::: ').concat(this.bookDesc,"\n\t")},t.prototype.description=function(){return"".concat(this.author," 's ").concat(this.title," is a book about: ").concat(this.bookDesc)};const e=t;function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"p",e=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=document.createElement(t);if(e){var r=document.createTextNode(e);a.appendChild(r)}if(o&&a.classList.add(o),n&&(a.id=n),Array.isArray(i))for(var l=0;l<i.length;l+=1)a[i[l].prop]=i[l].value;return a}function n(t,e,n){return o(t,e,n)}var i=document.getElementById("booklist");const a=function(t){i.innerHTML=null,t.map((function(t,e){var n,a=o("li","","booklist-partition__book"),r=o("img","","booklist-partition__icon","",[{prop:"src",value:"./public/images/icons8-book-64.png"},{prop:"alt",value:"books icon"}]),l=o("div","","booklist-partition__book-content"),s=o("h3",t.title,"booklist-partition__title"),c=o("span","i","booklist-partition__bookdesc-btn"),d=o("h5",t.author,"booklist-partition__author"),u=o("p","".concat(t.numPages," pages"),"booklist-partition__pages");n="already read"===t.bookState?o("span",t.bookState,"booklist-partition__book-read","book-note"):o("spam",t.bookState,"booklist-partition__book-not-read","book-note");var h=o("button","X","booklist-partition__remove-btn","");return c.setAttribute("data-id",e),h.setAttribute("data-id",e),n.setAttribute("data-id",e),s.appendChild(c),l.appendChild(s),l.appendChild(d),l.appendChild(u),l.appendChild(n),a.appendChild(r),a.appendChild(l),a.appendChild(h),i.appendChild(a),a}))};var r=document.getElementById("hidden-message-board"),l=document.querySelector(".book-stack__ornament3"),s="Welcome, fell free to post your books here! :-)";const c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,o=arguments.length>2?arguments[2]:void 0,i=n(t,e,o);r.style.display="block",console.log(l),r.appendChild(i),setTimeout((function(){r.style.display="none",r.innerHTML=null}),5e3)};var d=document.querySelector(".booklist-partition__book-desc"),u="JAVASCRIPT BOOKSHELF";const h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,o=arguments.length>2?arguments[2]:void 0;d.innerHTML=null;var i=n("h2",u,"booklist-partition__desc-text1");d.appendChild(i);var a=n(t,e,o);d.appendChild(a)};var p=document.getElementById("description-partition__about"),b=document.getElementById("add-book"),k=(document.getElementById("book-desc"),[]),g=new e("The Hobbit","J.R.R. Tolkien",295,"already read"),m=new e("The Fellowship of the Ring","J.R.R. Tolkien",395,"not read yet"),f=new e("The Two Towers","J.R.R. Tolkien",395,"not read yet"),v=new e("The Return of the King","J.R.R. Tolkien",395,"not read yet");function _(){document.querySelectorAll(".booklist-partition__bookdesc-btn").forEach((function(t){t.addEventListener("click",(function(t){var e=Number(t.target.getAttribute("data-id"));console.log(e);var o=k.filter((function(t,o){if(o===e)return t}));o[0].description(),h("h4",o[0].info(),"booklist-partition__desc-text")}))}))}function y(){document.querySelectorAll("#book-note").forEach((function(t){t.addEventListener("click",(function(t){var e=Number(t.target.getAttribute("data-id"));console.log(e),"already read"===t.target.textContent?C(t.target,e,"not read yet","booklist-partition__book-read","booklist-partition__book-not-read"):C(t.target,e,"already read","booklist-partition__book-not-read","booklist-partition__book-read")}))}))}function T(){document.querySelectorAll(".booklist-partition__remove-btn").forEach((function(t){t.addEventListener("click",(function(t){console.log(t.target.getAttribute("data-id"));var e,o=Number(t.target.getAttribute("data-id"));e=o,k=k.filter((function(t,o){if(o!==e)return t})),console.log(k),a(k),_(),y(),T(),E()}))}))}function C(t,e,o,n,i){k.map((function(t,n){n===e&&(t.bookState=o)})),t.textContent=o,t.classList.remove(n),t.classList.add(i)}function E(){var t="".concat(k.length," book(s) :::  Click on the books to get their descriptions!");if(k.length>0)k=k.filter((function(t){return"Your Book here!"!==t.title})),a(k),_(),y(),T(),h("h4",t,"booklist-partition__desc-text2");else{var o=new e("Your Book here!","This is also for you! :-)","All that you need: ","not read yet");k.push(o),a(k),T(),h("h4",t,"booklist-partition__desc-text2")}}k.push(g,m,f,v),E(),p.addEventListener("click",(function(){console.log("test about sec"),c("h3","Welcome, to the JS-Library and fell free share your books here!","message-board-msg")})),b.addEventListener("click",(function(){var t=document.getElementById("title"),o=document.getElementById("author"),n=document.getElementById("num-pages"),i=document.getElementById("is-read");console.log("input checked value: ",i.checked),function(t,o,n,i){if(t&&o){n||(n=0),console.log("input checked value: ",i);var a=new e(t,o,n,i=i?"already read":"not read yet");k.push(a),console.log(k)}else console.log("Please, fill all the required fields: TITLE and AUTHOR"),c("h4","Please, fill all the required fields: TITLE and AUTHOR","message-board-validation")}(t.value,o.value,n.value,i.checked);var r='Your book "'.concat(t.value,'" was added to the JS-LIBRARY!');!function(t,e,o,n){t.value="",e.value="",o.value="",n.checked=!1}(t,o,n,i),k=k.filter((function(t){return"Your Book here!"!==t.title})),a(k),_(),y(),T(),h("h4",r,"booklist-partition__desc-text2")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFVBQ3JDb0UsRUFBWXJGLFNBQVNpQixlQUFlLGFBQ3BDcUUsRUFBZXRGLFNBQVNpQixlQUFlLFdBRTdDdUIsUUFBUUMsSUFBSSx3QkFBeUI2QyxFQUFhQyxTQXdGbkQsU0FBMEJuSCxFQUFPQyxFQUFRQyxFQUFVa0gsR0FDakQsR0FBSXBILEdBQVNDLEVBQVEsQ0FDaEJDLElBQ0pBLEVBQVcsR0FHWmtFLFFBQVFDLElBQUksd0JBQXlCK0MsR0FPckMsSUFBTW5FLEVBQU8sSUFBSWxELEVBQUtDLEVBQU9DLEVBQVFDLEVBTHBDa0gsRUFER0EsRUFDUyxlQUVBLGdCQUtidkMsRUFBVWdDLEtBQUs1RCxHQUVmbUIsUUFBUUMsSUFBSVEsRUFDWixNQUNBVCxRQUFRQyxJQUFSLDBEQUlBeUMsRUFBaUIsS0FGSCx5REFFa0IsMkJBRWpDLENBL0dBTyxDQUFpQk4sRUFBVXRFLE1BQU91RSxFQUFXdkUsTUFBT3dFLEVBQVV4RSxNQUFPeUUsRUFBYUMsU0FFL0UsSUFBSVIsRUFBZSxjQUFILE9BQWlCSSxFQUFVdEUsTUFBM0IsbUNBNEhwQixTQUF3QnNFLEVBQVdDLEVBQVlDLEVBQVdDLEdBQ3pESCxFQUFVdEUsTUFBUSxHQUNsQnVFLEVBQVd2RSxNQUFRLEdBQ25Cd0UsRUFBVXhFLE1BQVEsR0FDbEJ5RSxFQUFhQyxTQUFVLENBQ3ZCLENBL0hBRyxDQUFlUCxFQUFXQyxFQUFZQyxFQUFXQyxHQUU5Q3JDLEVBQVlBLEVBQVVlLFFBQU8sU0FBQTNDLEdBQUksTUFBbUIsb0JBQWZBLEVBQUtqRCxLQUFULElBR3BDc0csRUFBYXpCLEdBR2JLLElBQ0FZLElBQ0FLLElBR0dOLEVBQWMsS0FBTWMsRUFBYyxpQ0FDckMsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2phdmFzY3JpcHQtYm9va3NoZWxmLW9vcC8uL3NyYy9tb2RlbC9Cb29rLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtYm9va3NoZWxmLW9vcC8uL3NyYy9jb21wb25lbnRzL2F1eFVJRnVuY3Rpb25zLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtYm9va3NoZWxmLW9vcC8uL3NyYy9jb21wb25lbnRzL0Jvb2tsaXN0LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtYm9va3NoZWxmLW9vcC8uL3NyYy9jb21wb25lbnRzL01lc3NhZ2VCb2FyZC5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LWJvb2tzaGVsZi1vb3AvLi9zcmMvY29tcG9uZW50cy9Cb29rRGVzYy5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LWJvb2tzaGVsZi1vb3AvLi9zcmMvbXktanNMaWJyYXJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEJvb2sodGl0bGUsIGF1dGhvciwgbnVtUGFnZXMsIGJvb2tTdGF0ZSkge1xuXHR0aGlzLnRpdGxlID0gdGl0bGU7XG5cdHRoaXMuYXV0aG9yID0gYXV0aG9yO1xuXHR0aGlzLmNvYXV0aG9ycyA9IFtdO1xuXHR0aGlzLm51bVZvbHVtZXMgPSAxO1xuXHR0aGlzLnB1Ymxpc2hlciA9ICdGYW50YXN0aWMgQm9va3NoZWxmJztcblx0dGhpcy5ib29rVHlwZSA9ICdoYXJkIGNvcnZlcic7XG5cdHRoaXMuYm9va0NhdGVnb3J5ID0gJ2ZpY3Rpb24nO1xuXHR0aGlzLmVkaXRpb24gPSAxO1xuXHR0aGlzLnJlbGVhc2VZZWFyID0gbmV3IERhdGUoKTtcblx0dGhpcy5udW1QYWdlcyA9IG51bVBhZ2VzO1xuXHR0aGlzLmJvb2tTdGF0ZSA9IGJvb2tTdGF0ZTtcblx0dGhpcy5kYXRlID0gbmV3IERhdGUoKVxuXHR0aGlzLmxhc3RDaGFuZ2UgPSBuZXcgRGF0ZSgpO1xuXHRcblx0dGhpcy5ib29rRGVzYyA9IGBMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0LiBTZWQgcGVsbGVudGVzcXVlLCBkb2xvciBhYyBzdXNjaXBpdCB2b2x1dHBhdCwgdXJuYSBvZGlvIHN1c2NpcGl0IHRvcnRvciwgdXQgY29uZGltZW50dW0gbWV0dXMgbnVsbGEgc29kYWxlcyBuaXNsLiBOdWxsYW0gcG9ydHRpdG9yIGZpbmlidXMgbWV0dXMgdXQgZmF1Y2lidXMuYDtcbn0gXG5cbkJvb2sucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbigpIHtcblx0Y29uc3Qgc2hvcnREZXNjID0gYFRoZSBib29rIFwiJHt0aGlzLnRpdGxlfVwiIGJ5ICR7dGhpcy5hdXRob3J9IGhhcyAke3RoaXMubnVtUGFnZXN9IHBhZ2VzLCBpbiAke3RoaXMubnVtVm9sdW1lc30gdm9sdW1lKHMpLiBJdCBpcyBhICR7dGhpcy5ib29rQ2F0ZWdvcnkudG9VcHBlckNhc2UoKX0gcHVibGljYXRpb24gYnkgJHt0aGlzLnB1Ymxpc2hlcn0gZWRpdG9ycywgcmVsZWFzZWQgaW4gXCIke3RoaXMuYm9va1R5cGV9XCIgZm9ybWF0LCBpbiAke3RoaXMucmVsZWFzZVllYXIuZ2V0RnVsbFllYXIoKX0gLSBcIiR7dGhpcy5ib29rU3RhdGUudG9VcHBlckNhc2UoKX1cIiA6OjogJHt0aGlzLmJvb2tEZXNjfVxuXHRgO1xuXHRcdFx0XG5cdHJldHVybiBzaG9ydERlc2M7XG59XG5cbkJvb2sucHJvdG90eXBlLmRlc2NyaXB0aW9uID0gZnVuY3Rpb24oKSB7XG5cdGNvbnN0IGJpZ0Rlc2MgPSBgJHt0aGlzLmF1dGhvcn0gJ3MgJHt0aGlzLnRpdGxlfSBpcyBhIGJvb2sgYWJvdXQ6ICR7dGhpcy5ib29rRGVzY31gO1xuXHRcblx0cmV0dXJuIGJpZ0Rlc2M7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEJvb2s7XG4iLCJmdW5jdGlvbiBjcmVhdGVET01Ob2RlKG5vZGUgPSAncCcsIGh0bWxUZXh0LCBjc3NDbGFzcywgY3NzSWQsIGNzc1Byb3BzKSB7XG5cdGxldCBuZXdOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlKTtcblx0XG5cdGlmIChodG1sVGV4dCkge1xuXHRcdGNvbnN0IHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaHRtbFRleHQpO1xuXHRcdFxuXHRcdG5ld05vZGUuYXBwZW5kQ2hpbGQodGV4dE5vZGUpO1xuXHR9XG5cdFxuXHRpZiAoY3NzQ2xhc3MpIHtcblx0XHRuZXdOb2RlLmNsYXNzTGlzdC5hZGQoY3NzQ2xhc3MpO1xuXHR9XG5cdFxuXHRpZiAoY3NzSWQpIHtcblx0XHRuZXdOb2RlLmlkID0gY3NzSWQ7XG5cdH1cblx0XG5cdC8vY29uc29sZS5sb2coY3NzUHJvcHMpO1xuXHQvL2NvbnNvbGUubG9nKEFycmF5LmlzQXJyYXkoY3NzUHJvcHMpKTtcblx0aWYgKEFycmF5LmlzQXJyYXkoY3NzUHJvcHMpKSB7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjc3NQcm9wcy5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0bmV3Tm9kZVtjc3NQcm9wc1tpXS5wcm9wXSA9IGNzc1Byb3BzW2ldLnZhbHVlO1xuXHRcdH1cblx0fVxuXHRcblx0cmV0dXJuIG5ld05vZGU7XG59XG5cblxuZnVuY3Rpb24gcHJpbnRNc2cobm9kZSwgbXNnLCBjc3NDbGFzcykge1xuXHRsZXQgbWVzc2FnZSA9IG1zZztcblx0XG5cdGxldCBuZXdVSU5vZGUgPSBjcmVhdGVET01Ob2RlKFxuXHRub2RlLCBtZXNzYWdlLCBjc3NDbGFzcyk7XG5cdFxuXHRyZXR1cm4gbmV3VUlOb2RlO1xufVxuXG5cbmV4cG9ydCB7XG4gICAgY3JlYXRlRE9NTm9kZSxcblx0XHRwcmludE1zZyxcbn07XG5cblxuIiwiaW1wb3J0IHsgY3JlYXRlRE9NTm9kZSB9IGZyb20gJy4vYXV4VUlGdW5jdGlvbnMuanMnO1xuXG5cbi8vIFVJIG5vZGVzXG5jb25zdCBib29rU2hlbGYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9va2xpc3QnKTtcblxuZnVuY3Rpb24gc2hvd0Jvb2tsaXN0KGxpc3QpIHtcblx0Ym9va1NoZWxmLmlubmVySFRNTCA9IG51bGw7XG5cdFxuXHRsZXQgbmV3Tm9kZSA9IGxpc3QubWFwKChib29rLCBpZHgpID0+IHtcblx0XHQvLyBDcmVhdGUgZWxlbWVudHMgYW5kIGl0cyBwcm9wZXJ0aWVzXG5cdFx0Y29uc3QgbGkgPSBjcmVhdGVET01Ob2RlKCdsaScsICcnLCAnYm9va2xpc3QtcGFydGl0aW9uX19ib29rJyk7XHRcblx0XHRjb25zdCBpbWcgPSBjcmVhdGVET01Ob2RlKCdpbWcnLCAnJywgJ2Jvb2tsaXN0LXBhcnRpdGlvbl9faWNvbicsICcnLCBbeyBwcm9wOiAnc3JjJywgdmFsdWU6ICcuL3B1YmxpYy9pbWFnZXMvaWNvbnM4LWJvb2stNjQucG5nJyB9LCB7IHByb3A6ICdhbHQnLCB2YWx1ZTogJ2Jvb2tzIGljb24nIH1dKTtcblx0XHRjb25zdCBkaXYgPSBjcmVhdGVET01Ob2RlKCdkaXYnLCAnJywgJ2Jvb2tsaXN0LXBhcnRpdGlvbl9fYm9vay1jb250ZW50Jyk7XG5cdFx0Y29uc3QgaDMgPSBjcmVhdGVET01Ob2RlKCdoMycsIGJvb2sudGl0bGUsICdib29rbGlzdC1wYXJ0aXRpb25fX3RpdGxlJyApO1xuXHRcdGNvbnN0IHNwYW5EZXNjQnRuID0gY3JlYXRlRE9NTm9kZSgnc3BhbicsICdpJywgJ2Jvb2tsaXN0LXBhcnRpdGlvbl9fYm9va2Rlc2MtYnRuJyk7XG5cdFx0Y29uc3QgaDUgPSBjcmVhdGVET01Ob2RlKCdoNScsIGJvb2suYXV0aG9yLCAnYm9va2xpc3QtcGFydGl0aW9uX19hdXRob3InKTtcblx0XHRjb25zdCBwYXJhMSA9IGNyZWF0ZURPTU5vZGUoJ3AnLCBgJHtib29rLm51bVBhZ2VzfSBwYWdlc2AsICdib29rbGlzdC1wYXJ0aXRpb25fX3BhZ2VzJyk7XG5cdFx0XG5cdFx0bGV0IHNwYW47XG5cdFx0aWYgKGJvb2suYm9va1N0YXRlID09PSAnYWxyZWFkeSByZWFkJykge1xuXHRcdFx0c3BhbiA9IGNyZWF0ZURPTU5vZGUoJ3NwYW4nLCBib29rLmJvb2tTdGF0ZSwgJ2Jvb2tsaXN0LXBhcnRpdGlvbl9fYm9vay1yZWFkJywgJ2Jvb2stbm90ZScpO1x0XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNwYW4gPSBjcmVhdGVET01Ob2RlKCdzcGFtJywgYm9vay5ib29rU3RhdGUsICdib29rbGlzdC1wYXJ0aXRpb25fX2Jvb2stbm90LXJlYWQnLCAnYm9vay1ub3RlJyk7XG5cdFx0fVxuXHRcdFxuXHRcdFxuXHRcdGNvbnN0IHJlbW92ZUJ0biA9IGNyZWF0ZURPTU5vZGUoJ2J1dHRvbicsICdYJywgJ2Jvb2tsaXN0LXBhcnRpdGlvbl9fcmVtb3ZlLWJ0bicsICcnKTtcblx0XHRcblx0XHQvLyBTZXQgZ2xvYmFsIGRhdGEgYXR0cmlidXRlXG5cdFx0c3BhbkRlc2NCdG4uc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgaWR4KTtcblx0XHRyZW1vdmVCdG4uc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgaWR4KTtcblx0XHRzcGFuLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIGlkeCk7XG5cdFx0XG5cdFx0Ly8gQXNzZW1ibGUgdGhlIGNvbXBvbmVudFx0XHRcblx0XHRoMy5hcHBlbmRDaGlsZChzcGFuRGVzY0J0bik7XG5cdFx0XG5cdFx0ZGl2LmFwcGVuZENoaWxkKGgzKTtcblx0XHRkaXYuYXBwZW5kQ2hpbGQoaDUpO1xuXHRcdGRpdi5hcHBlbmRDaGlsZChwYXJhMSk7XG5cdFx0ZGl2LmFwcGVuZENoaWxkKHNwYW4pO1xuXHRcdFx0XG5cdFx0bGkuYXBwZW5kQ2hpbGQoaW1nKTtcblx0XHRsaS5hcHBlbmRDaGlsZChkaXYpO1xuXHRcdGxpLmFwcGVuZENoaWxkKHJlbW92ZUJ0bik7XG5cdFx0XG5cdFx0Ym9va1NoZWxmLmFwcGVuZENoaWxkKGxpKTtcblx0XHRcblx0XHRyZXR1cm4gbGk7XG5cdH0pO1xufVxuXG5cbmV4cG9ydCBkZWZhdWx0IHNob3dCb29rbGlzdDtcblxuIiwiaW1wb3J0IHsgY3JlYXRlRE9NTm9kZSwgcHJpbnRNc2cgfSBmcm9tICcuL2F1eFVJRnVuY3Rpb25zLmpzJztcblxuXG4vLyBVSSBub2Rlc1xuY29uc3QgbWVzc2FnZUJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hpZGRlbi1tZXNzYWdlLWJvYXJkJyk7XG5jb25zdCB0aGlyZFdhbGxPcm5hbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib29rLXN0YWNrX19vcm5hbWVudDMnKTtcblxubGV0IG1zZyA9ICdXZWxjb21lLCBmZWxsIGZyZWUgdG8gcG9zdCB5b3VyIGJvb2tzIGhlcmUhIDotKSc7XG5cbmZ1bmN0aW9uIHNob3dNZXNzYWdlQm9hcmQobm9kZSwgbWVzc2FnZSA9IG1zZywgY3NzQ2xhc3MpIHtcblx0XG5cdGxldCBuZXdVSU5vZGUgPSBwcmludE1zZyhub2RlLCBtZXNzYWdlLCBjc3NDbGFzcyk7XG5cdFxuXHRtZXNzYWdlQm9hcmQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cdFxuXHRjb25zb2xlLmxvZyh0aGlyZFdhbGxPcm5hbWVudCk7XG5cdFxuXHRtZXNzYWdlQm9hcmQuYXBwZW5kQ2hpbGQobmV3VUlOb2RlKTtcblx0XG5cdGNvbnN0IG1zZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRtZXNzYWdlQm9hcmQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuXHRcdG1lc3NhZ2VCb2FyZC5pbm5lckhUTUwgPSBudWxsO1xuXHR9XG5cdCwgNTAwMCk7XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgc2hvd01lc3NhZ2VCb2FyZDtcblxuIiwiaW1wb3J0IHsgY3JlYXRlRE9NTm9kZSwgcHJpbnRNc2cgfSBmcm9tICcuL2F1eFVJRnVuY3Rpb25zLmpzJztcblxuXG4vLyBVSSBub2Rlc1xuY29uc3QgYm9va2xpc3RQYXJ0aXRpb25EZXNjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvb2tsaXN0LXBhcnRpdGlvbl9fYm9vay1kZXNjJyk7XG5cbmxldCBkZWZhdWx0TXNnID0gJ0pBVkFTQ1JJUFQgQk9PS1NIRUxGJztcblxuZnVuY3Rpb24gc2hvd0Jvb2tCb2FyZChub2RlLCBtZXNzYWdlID0gZGVmYXVsdE1zZywgY3NzQ2xhc3MpIHtcbiAgICBib29rbGlzdFBhcnRpdGlvbkRlc2MuaW5uZXJIVE1MID0gbnVsbDtcbiAgICBcbiAgICAgICAgbGV0IG5ld0xpYnJhcnlOb2RlID0gcHJpbnRNc2coJ2gyJywgZGVmYXVsdE1zZywgJ2Jvb2tsaXN0LXBhcnRpdGlvbl9fZGVzYy10ZXh0MScpO1xuICAgICAgICBib29rbGlzdFBhcnRpdGlvbkRlc2MuYXBwZW5kQ2hpbGQobmV3TGlicmFyeU5vZGUpO1xuICAgIFxuICAgICAgICBsZXQgbmV3Qm9va05vZGUgPSBwcmludE1zZyhub2RlLCBtZXNzYWdlLCBjc3NDbGFzcyk7XG4gICAgICAgIGJvb2tsaXN0UGFydGl0aW9uRGVzYy5hcHBlbmRDaGlsZChuZXdCb29rTm9kZSk7XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgc2hvd0Jvb2tCb2FyZDtcblxuIiwiLypcbiogXG4qL1xuaW1wb3J0IEJvb2sgZnJvbSAnLi9tb2RlbC9Cb29rLmpzJztcbmltcG9ydCBzaG93Qm9va2xpc3QgZnJvbSAnLi9jb21wb25lbnRzL0Jvb2tsaXN0LmpzJztcbmltcG9ydCBzaG93TWVzc2FnZUJvYXJkIGZyb20gJy4vY29tcG9uZW50cy9NZXNzYWdlQm9hcmQuanMnO1xuaW1wb3J0IHNob3dCb29rQm9hcmQgZnJvbSAnLi9jb21wb25lbnRzL0Jvb2tEZXNjLmpzJztcblxuXG4vLyBVSSBub2Rlc1xuY29uc3QgYWJvdXRTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rlc2NyaXB0aW9uLXBhcnRpdGlvbl9fYWJvdXQnKTtcbmNvbnN0IGFkZEJvb2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLWJvb2snKTtcbmNvbnN0IGJvb2tzaGVsZkJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jvb2stZGVzYycpO1xuXG5cbmxldCBteUxpYnJhcnkgPSBbXTtcblxuY29uc3QgdGhlSG9iYml0ID0gbmV3IEJvb2soJ1RoZSBIb2JiaXQnLCAnSi5SLlIuIFRvbGtpZW4nLCAyOTUsICdhbHJlYWR5IHJlYWQnKTtcbmNvbnN0IHRoZUZlbGxvd3NoaXAgPSBuZXcgQm9vaygnVGhlIEZlbGxvd3NoaXAgb2YgdGhlIFJpbmcnLCAnSi5SLlIuIFRvbGtpZW4nLCAzOTUsICdub3QgcmVhZCB5ZXQnKTtcbmNvbnN0IHRoZVR3b1Rvd2VycyA9IG5ldyBCb29rKCdUaGUgVHdvIFRvd2VycycsICdKLlIuUi4gVG9sa2llbicsIDM5NSwgJ25vdCByZWFkIHlldCcpO1xuY29uc3QgdGhlUmV0dXJuT2ZUaGVLaW5nID0gbmV3IEJvb2soJ1RoZSBSZXR1cm4gb2YgdGhlIEtpbmcnLCAnSi5SLlIuIFRvbGtpZW4nLCAzOTUsICdub3QgcmVhZCB5ZXQnKTtcblxubXlMaWJyYXJ5LnB1c2godGhlSG9iYml0LCB0aGVGZWxsb3dzaGlwLCB0aGVUd29Ub3dlcnMsIHRoZVJldHVybk9mVGhlS2luZyk7XG5jaGVja0xpYnJhcnkoKTtcblxuXG5hYm91dFNlY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdGNvbnNvbGUubG9nKCd0ZXN0IGFib3V0IHNlYycpO1xuXHRsZXQgbWVzc2FnZSA9ICdXZWxjb21lLCB0byB0aGUgSlMtTGlicmFyeSBhbmQgZmVsbCBmcmVlIHNoYXJlIHlvdXIgYm9va3MgaGVyZSEnO1xuXHRcblx0c2hvd01lc3NhZ2VCb2FyZCgnaDMnLCBtZXNzYWdlLCAnbWVzc2FnZS1ib2FyZC1tc2cnKTtcbn0pO1xuXG5cbmFkZEJvb2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdC8vIEZvcm0gbm9kZXNcblx0Y29uc3Qgbm9kZVRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpdGxlJyk7XG5cdGNvbnN0IG5vZGVBdXRob3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0aG9yJyk7XG5cdGNvbnN0IG5vZGVQYWdlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdudW0tcGFnZXMnKTtcblx0Y29uc3Qgbm9kZUJvb2tOb3RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lzLXJlYWQnKTtcblx0XG5cdGNvbnNvbGUubG9nKCdpbnB1dCBjaGVja2VkIHZhbHVlOiAnLCBub2RlQm9va05vdGUuY2hlY2tlZCk7XG5cdFxuXHRhZGRCb29rVG9MaWJyYXJ5KG5vZGVUaXRsZS52YWx1ZSwgbm9kZUF1dGhvci52YWx1ZSwgbm9kZVBhZ2VzLnZhbHVlLCBub2RlQm9va05vdGUuY2hlY2tlZCk7XG5cdFxuICAgIGxldCBib29rQm9hcmRNc2cgPSBgWW91ciBib29rIFwiJHtub2RlVGl0bGUudmFsdWV9XCIgd2FzIGFkZGVkIHRvIHRoZSBKUy1MSUJSQVJZIWA7XG4gICAgXG5cdGNsZWFyRm9ybVNoZWV0KG5vZGVUaXRsZSwgbm9kZUF1dGhvciwgbm9kZVBhZ2VzLCBub2RlQm9va05vdGUpO1xuXHRcbiAgICBteUxpYnJhcnkgPSBteUxpYnJhcnkuZmlsdGVyKGJvb2sgPT4gYm9vay50aXRsZSAhPT0gJ1lvdXIgQm9vayBoZXJlIScpO1xuICAgIFxuXHQvLyBSZW5kZXIgbGlicmFyeVxuXHRzaG93Qm9va2xpc3QobXlMaWJyYXJ5KTtcblx0XG5cdC8vIFBhc3MgRXZlbnRsaXN0ZW5lcnNcblx0Z2V0Qm9va0Rlc2MoKTtcblx0Y2hhbmdlQm9va05vdGVzKCk7XG5cdHJlbW92ZUJvb2tzKCk7XG4gICAgXG4gICAgLy8gU2hvdyBib29rc2hlbGZCb2FyZFxuICAgIHNob3dCb29rQm9hcmQoJ2g0JywgYm9va0JvYXJkTXNnLCAnYm9va2xpc3QtcGFydGl0aW9uX19kZXNjLXRleHQyJyk7XG59KTsgXG5cblxuZnVuY3Rpb24gZ2V0Qm9va0Rlc2MoKSB7XG4gICAgY29uc3QgZGVzY0J0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYm9va2xpc3QtcGFydGl0aW9uX19ib29rZGVzYy1idG4nKTtcblxuICAgIGRlc2NCdG5zLmZvckVhY2goYnRuID0+IHtcbiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgICAgICAvL2NvbnNvbGUuZGlyKGUudGFyZ2V0KTtcbiAgICAgICAgICAgIGxldCBidG5JZCA9IE51bWJlcihlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhidG5JZCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBib29rID0gbXlMaWJyYXJ5LmZpbHRlcigoYm9vaywgaWR4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlkeCA9PT0gYnRuSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJvb2s7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBtZXNzYWdlID0gYm9va1swXS5kZXNjcmlwdGlvbigpO1xuXG4gICAgICAgICAgICBzaG93Qm9va0JvYXJkKCdoNCcsIGJvb2tbMF0uaW5mbygpLCAnYm9va2xpc3QtcGFydGl0aW9uX19kZXNjLXRleHQnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cblxuZnVuY3Rpb24gY2hhbmdlQm9va05vdGVzKCkge1xuXHRjb25zdCBib29rTm90ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjYm9vay1ub3RlJyk7XG5cdFxuXHRib29rTm90ZXMuZm9yRWFjaChub3RlID0+IHtcblx0XHRub3RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG5cdFx0XHQvL2NvbnNvbGUuZGlyKGUudGFyZ2V0KTtcblx0XHRcdGxldCBub3RlSWQgPSBOdW1iZXIoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykpO1xuXHRcdFx0Y29uc29sZS5sb2cobm90ZUlkKTtcblx0XHRcdFxuXHRcdFx0aWYgKGUudGFyZ2V0LnRleHRDb250ZW50ID09PSAnYWxyZWFkeSByZWFkJykge1xuXHRcdFx0XHRjaGVja0Jvb2tOb3RlKGUudGFyZ2V0LCBub3RlSWQsICdub3QgcmVhZCB5ZXQnLCAnYm9va2xpc3QtcGFydGl0aW9uX19ib29rLXJlYWQnLCAnYm9va2xpc3QtcGFydGl0aW9uX19ib29rLW5vdC1yZWFkJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjaGVja0Jvb2tOb3RlKGUudGFyZ2V0LCBub3RlSWQsICdhbHJlYWR5IHJlYWQnLCAnYm9va2xpc3QtcGFydGl0aW9uX19ib29rLW5vdC1yZWFkJywgJ2Jvb2tsaXN0LXBhcnRpdGlvbl9fYm9vay1yZWFkJyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0pO1xufVxuXG5cbmZ1bmN0aW9uIHJlbW92ZUJvb2tzKCkge1xuXHRjb25zdCByZW1vdmVCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJvb2tsaXN0LXBhcnRpdGlvbl9fcmVtb3ZlLWJ0bicpO1xuXHRcblx0cmVtb3ZlQnRucy5mb3JFYWNoKGJ0biA9PiB7XG5cdFx0YnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG5cdFx0XHRjb25zb2xlLmxvZyhlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSk7XG5cdFx0XHRsZXQgYnRuSW5kZXggPSBOdW1iZXIoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykpO1xuXHRcdFx0XG5cdFx0XHRyZW1vdmVCb29rZnJvbUxpYnJhcnkoYnRuSW5kZXgpO1xuXHRcdFx0XG5cdFx0XHQvLyBSZW5kZXIgQm9va2xpc3Rcblx0XHRcdHNob3dCb29rbGlzdChteUxpYnJhcnkpO1xuXHRcdFx0XG5cdFx0XHQvLyBQYXNzIEV2ZW50bGlzdGVuZXJzXG5cdFx0XHRnZXRCb29rRGVzYygpO1xuXHRcdFx0Y2hhbmdlQm9va05vdGVzKCk7XG5cdFx0XHRyZW1vdmVCb29rcygpO1xuXHRcdFx0Y2hlY2tMaWJyYXJ5KCk7XG5cdFx0fSk7XG5cdH0pO1x0XG59ICBcblxuXG5mdW5jdGlvbiBhZGRCb29rVG9MaWJyYXJ5KHRpdGxlLCBhdXRob3IsIG51bVBhZ2VzLCBib29rc1JlYWQpIHtcbiAgaWYgKHRpdGxlICYmIGF1dGhvcikge1xuXHRcdGlmICghbnVtUGFnZXMpIHtcblx0XHRcdG51bVBhZ2VzID0gMDtcblx0XHR9XG5cdFx0XG5cdFx0Y29uc29sZS5sb2coJ2lucHV0IGNoZWNrZWQgdmFsdWU6ICcsIGJvb2tzUmVhZCk7XG5cdFx0aWYgKGJvb2tzUmVhZCkge1xuXHRcdFx0Ym9va3NSZWFkID0gJ2FscmVhZHkgcmVhZCc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGJvb2tzUmVhZCA9ICdub3QgcmVhZCB5ZXQnO1xuXHRcdH1cblx0XHRcblx0XHRjb25zdCBib29rID0gbmV3IEJvb2sodGl0bGUsIGF1dGhvciwgbnVtUGFnZXMsIGJvb2tzUmVhZCk7XG5cdFx0XG5cdFx0bXlMaWJyYXJ5LnB1c2goYm9vayk7XG5cdFx0XG5cdFx0Y29uc29sZS5sb2cobXlMaWJyYXJ5KTtcblx0fSBlbHNlIHtcblx0XHRjb25zb2xlLmxvZyhgUGxlYXNlLCBmaWxsIGFsbCB0aGUgcmVxdWlyZWQgZmllbGRzOiBUSVRMRSBhbmQgQVVUSE9SYCk7XG5cdFx0XG5cdFx0bGV0IG1lc3NhZ2UgPSAnUGxlYXNlLCBmaWxsIGFsbCB0aGUgcmVxdWlyZWQgZmllbGRzOiBUSVRMRSBhbmQgQVVUSE9SJztcblx0XHRcblx0XHRzaG93TWVzc2FnZUJvYXJkKCdoNCcsIG1lc3NhZ2UsICdtZXNzYWdlLWJvYXJkLXZhbGlkYXRpb24nKTtcblx0fSAgXG59XG5cblxuZnVuY3Rpb24gcmVtb3ZlQm9va2Zyb21MaWJyYXJ5KGJvb2tJbmRleCkge1xuXHRteUxpYnJhcnkgPSBteUxpYnJhcnkuZmlsdGVyKChib29rLCBpZHgpID0+IHtcblx0XHRpZiAoaWR4ICE9PSBib29rSW5kZXgpIHtcblx0XHRcdHJldHVybiBib29rO1xuXHRcdH1cblx0fSk7XG5cdFx0XG5cdGNvbnNvbGUubG9nKG15TGlicmFyeSk7XG59XG5cblxuLyogQVVYSUxJQVJZIEZVTkNUSU9OUyAqL1xuZnVuY3Rpb24gY2xlYXJGb3JtU2hlZXQobm9kZVRpdGxlLCBub2RlQXV0aG9yLCBub2RlUGFnZXMsIG5vZGVCb29rTm90ZSkge1xuXHRub2RlVGl0bGUudmFsdWUgPSAnJztcblx0bm9kZUF1dGhvci52YWx1ZSA9ICcnO1xuXHRub2RlUGFnZXMudmFsdWUgPSAnJztcblx0bm9kZUJvb2tOb3RlLmNoZWNrZWQgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gY2hlY2tCb29rTm90ZShub2RlLCBub3RlSWQsIG5vdGUsIGNzc1RvUmVtb3ZlLCBjc3NUb0FkZCkge1xuXHRteUxpYnJhcnkubWFwKChib29rLCBpZHgpID0+IHtcblx0XHRpZiAoaWR4ID09PSBub3RlSWQpIHtcblx0XHRcdGJvb2suYm9va1N0YXRlID0gbm90ZTtcblx0XHR9XG5cdH0pO1xuXHRcblx0bm9kZS50ZXh0Q29udGVudCA9IG5vdGU7XG5cdG5vZGUuY2xhc3NMaXN0LnJlbW92ZShjc3NUb1JlbW92ZSk7XG5cdG5vZGUuY2xhc3NMaXN0LmFkZChjc3NUb0FkZCk7XG59XG5cbmZ1bmN0aW9uIGNoZWNrTGlicmFyeSgpIHtcblx0bGV0IGJvb2tCb2FyZE1zZyA9IGAke215TGlicmFyeS5sZW5ndGh9IGJvb2socykgOjo6ICBDbGljayBvbiB0aGUgYm9va3MgdG8gZ2V0IHRoZWlyIGRlc2NyaXB0aW9ucyFgO1xuICAgIFxuICAgIGlmIChteUxpYnJhcnkubGVuZ3RoID4gMCkge1xuXHRcdG15TGlicmFyeSA9IG15TGlicmFyeS5maWx0ZXIoYm9vayA9PiBib29rLnRpdGxlICE9PSAnWW91ciBCb29rIGhlcmUhJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZW5kZXIgbGlicmFyeVxuXHRcdHNob3dCb29rbGlzdChteUxpYnJhcnkpO1xuXHRcdFxuXHRcdC8vIFBhc3MgRXZlbnRsaXN0ZW5lcnNcblx0XHRnZXRCb29rRGVzYygpO1xuXHRcdGNoYW5nZUJvb2tOb3RlcygpO1xuXHRcdHJlbW92ZUJvb2tzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBTaG93IGJvb2tzaGVsZkJvYXJkXG4gICAgICAgIHNob3dCb29rQm9hcmQoJ2g0JywgYm9va0JvYXJkTXNnLCAnYm9va2xpc3QtcGFydGl0aW9uX19kZXNjLXRleHQyJyk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3Qgc2lkZUIgPSBuZXcgQm9vaygnWW91ciBCb29rIGhlcmUhJywgJ1RoaXMgaXMgYWxzbyBmb3IgeW91ISA6LSknLCAnQWxsIHRoYXQgeW91IG5lZWQ6ICcsICdub3QgcmVhZCB5ZXQnKTtcblx0XHRteUxpYnJhcnkucHVzaChzaWRlQik7XG5cdFx0XG5cdFx0Ly8gUmVuZGVyIGxpYnJhcnlcblx0XHRzaG93Qm9va2xpc3QobXlMaWJyYXJ5KTtcblx0XHRcblx0XHQvLyBQYXNzIEV2ZW50bGlzdGVuZXJzXG5cdFx0cmVtb3ZlQm9va3MoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNob3cgYm9va3NoZWxmQm9hcmRcbiAgICAgICAgc2hvd0Jvb2tCb2FyZCgnaDQnLCBib29rQm9hcmRNc2csICdib29rbGlzdC1wYXJ0aXRpb25fX2Rlc2MtdGV4dDInKTtcblx0fVxufVxuXG5cbiJdLCJuYW1lcyI6WyJCb29rIiwidGl0bGUiLCJhdXRob3IiLCJudW1QYWdlcyIsImJvb2tTdGF0ZSIsInRoaXMiLCJjb2F1dGhvcnMiLCJudW1Wb2x1bWVzIiwicHVibGlzaGVyIiwiYm9va1R5cGUiLCJib29rQ2F0ZWdvcnkiLCJlZGl0aW9uIiwicmVsZWFzZVllYXIiLCJEYXRlIiwiZGF0ZSIsImxhc3RDaGFuZ2UiLCJib29rRGVzYyIsInByb3RvdHlwZSIsImluZm8iLCJ0b1VwcGVyQ2FzZSIsImdldEZ1bGxZZWFyIiwiZGVzY3JpcHRpb24iLCJjcmVhdGVET01Ob2RlIiwibm9kZSIsImh0bWxUZXh0IiwiY3NzQ2xhc3MiLCJjc3NJZCIsImNzc1Byb3BzIiwibmV3Tm9kZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInRleHROb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJhcHBlbmRDaGlsZCIsImNsYXNzTGlzdCIsImFkZCIsImlkIiwiQXJyYXkiLCJpc0FycmF5IiwiaSIsImxlbmd0aCIsInByb3AiLCJ2YWx1ZSIsInByaW50TXNnIiwibXNnIiwiYm9va1NoZWxmIiwiZ2V0RWxlbWVudEJ5SWQiLCJsaXN0IiwiaW5uZXJIVE1MIiwibWFwIiwiYm9vayIsImlkeCIsInNwYW4iLCJsaSIsImltZyIsImRpdiIsImgzIiwic3BhbkRlc2NCdG4iLCJoNSIsInBhcmExIiwicmVtb3ZlQnRuIiwic2V0QXR0cmlidXRlIiwibWVzc2FnZUJvYXJkIiwidGhpcmRXYWxsT3JuYW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibWVzc2FnZSIsIm5ld1VJTm9kZSIsInN0eWxlIiwiZGlzcGxheSIsImNvbnNvbGUiLCJsb2ciLCJzZXRUaW1lb3V0IiwiYm9va2xpc3RQYXJ0aXRpb25EZXNjIiwiZGVmYXVsdE1zZyIsIm5ld0xpYnJhcnlOb2RlIiwibmV3Qm9va05vZGUiLCJhYm91dFNlY3Rpb24iLCJhZGRCb29rQnRuIiwibXlMaWJyYXJ5IiwidGhlSG9iYml0IiwidGhlRmVsbG93c2hpcCIsInRoZVR3b1Rvd2VycyIsInRoZVJldHVybk9mVGhlS2luZyIsImdldEJvb2tEZXNjIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJidG4iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImJ0bklkIiwiTnVtYmVyIiwidGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwiZmlsdGVyIiwic2hvd0Jvb2tCb2FyZCIsImNoYW5nZUJvb2tOb3RlcyIsIm5vdGUiLCJub3RlSWQiLCJ0ZXh0Q29udGVudCIsImNoZWNrQm9va05vdGUiLCJyZW1vdmVCb29rcyIsImJvb2tJbmRleCIsImJ0bkluZGV4Iiwic2hvd0Jvb2tsaXN0IiwiY2hlY2tMaWJyYXJ5IiwiY3NzVG9SZW1vdmUiLCJjc3NUb0FkZCIsInJlbW92ZSIsImJvb2tCb2FyZE1zZyIsInNpZGVCIiwicHVzaCIsInNob3dNZXNzYWdlQm9hcmQiLCJub2RlVGl0bGUiLCJub2RlQXV0aG9yIiwibm9kZVBhZ2VzIiwibm9kZUJvb2tOb3RlIiwiY2hlY2tlZCIsImJvb2tzUmVhZCIsImFkZEJvb2tUb0xpYnJhcnkiLCJjbGVhckZvcm1TaGVldCJdLCJzb3VyY2VSb290IjoiIn0=