(()=>{"use strict";function t(t,e,o,n){this.title=t,this.author=e,this.coauthors=[],this.numVolumes=1,this.publisher="Fantastic Bookshelf",this.bookType="hard corver",this.bookCategory="fiction",this.edition=1,this.releaseYear=new Date,this.numPages=o,this.bookState=n,this.date=new Date,this.lastChange=new Date,this.bookDesc="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed pellentesque, dolor ac suscipit volutpat, urna odio suscipit tortor, ut condimentum metus nulla sodales nisl. Nullam porttitor finibus metus ut faucibus."}t.prototype.info=function(){return'The book "'.concat(this.title,'" by ').concat(this.author," has ").concat(this.numPages," pages in ").concat(this.numVolumes," volume(s). It is about ").concat(this.bookCategory.toUpperCase(),' and was published in the format "').concat(this.bookType,'" by ').concat(this.publisher," editors, in the year ").concat(this.releaseYear.getFullYear(),"/").concat(this.releaseYear.getMonth()+1,"/").concat(this.releaseYear.getDate(),' - "').concat(this.bookState.toUpperCase(),'" ::: ').concat(this.bookDesc,"\n\t")},t.prototype.description=function(){return"".concat(this.author," 's ").concat(this.title," is a book about: ").concat(this.bookDesc)};const e=t;function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"p",e=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=document.createElement(t);if(e){var r=document.createTextNode(e);a.appendChild(r)}if(o&&a.classList.add(o),n&&(a.id=n),Array.isArray(i))for(var l=0;l<i.length;l+=1)a[i[l].prop]=i[l].value;return a}function n(t,e,n){return o(t,e,n)}var i=document.getElementById("booklist");const a=function(t){i.innerHTML=null,t.map((function(t,e){var n,a=o("li","","booklist-partition__book"),r=o("img","","booklist-partition__icon","",[{prop:"src",value:"./public/images/icons8-book-64.png"},{prop:"alt",value:"books icon"}]),l=o("div","","booklist-partition__book-content"),s=o("h3",t.title,"booklist-partition__title"),c=o("span","i","booklist-partition__bookdesc-btn"),d=o("h5",t.author,"booklist-partition__author"),u=o("p","".concat(t.numPages," pages"),"booklist-partition__pages");n="already read"===t.bookState?o("span",t.bookState,"booklist-partition__book-read","book-note"):o("spam",t.bookState,"booklist-partition__book-not-read","book-note");var h=o("button","X","booklist-partition__remove-btn","");return c.setAttribute("data-id",e),h.setAttribute("data-id",e),n.setAttribute("data-id",e),s.appendChild(c),l.appendChild(s),l.appendChild(d),l.appendChild(u),l.appendChild(n),a.appendChild(r),a.appendChild(l),a.appendChild(h),i.appendChild(a),a}))};var r=document.getElementById("hidden-message-board"),l=document.querySelector(".book-stack__ornament3"),s="Welcome, fell free to post your books here! :-)";const c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,o=arguments.length>2?arguments[2]:void 0,i=n(t,e,o);r.style.display="block",console.log(l),r.appendChild(i),setTimeout((function(){r.style.display="none",r.innerHTML=null}),5e3)};var d=document.querySelector(".booklist-partition__book-desc"),u="JAVASCRIPT BOOKSHELF";const h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,o=arguments.length>2?arguments[2]:void 0;d.innerHTML=null;var i=n("h2",u,"booklist-partition__desc-text1");d.appendChild(i);var a=n(t,e,o);d.appendChild(a)};var p=document.getElementById("description-partition__about"),b=document.getElementById("add-book"),k=(document.getElementById("book-desc"),[]),g=new e("The Hobbit","J.R.R. Tolkien",295,"already read"),m=new e("The Fellowship of the Ring","J.R.R. Tolkien",395,"not read yet"),f=new e("The Two Towers","J.R.R. Tolkien",395,"not read yet"),v=new e("The Return of the King","J.R.R. Tolkien",395,"not read yet");function _(){document.querySelectorAll(".booklist-partition__bookdesc-btn").forEach((function(t){t.addEventListener("click",(function(t){var e=Number(t.target.getAttribute("data-id"));console.log(e);var o=k.filter((function(t,o){if(o===e)return t}));o[0].description(),h("h4",o[0].info(),"booklist-partition__desc-text")}))}))}function y(){document.querySelectorAll("#book-note").forEach((function(t){t.addEventListener("click",(function(t){var e=Number(t.target.getAttribute("data-id"));console.log(e),"already read"===t.target.textContent?C(t.target,e,"not read yet","booklist-partition__book-read","booklist-partition__book-not-read"):C(t.target,e,"already read","booklist-partition__book-not-read","booklist-partition__book-read")}))}))}function T(){document.querySelectorAll(".booklist-partition__remove-btn").forEach((function(t){t.addEventListener("click",(function(t){console.log(t.target.getAttribute("data-id"));var e,o=Number(t.target.getAttribute("data-id"));e=o,k=k.filter((function(t,o){if(o!==e)return t})),console.log(k),a(k),_(),y(),T(),E()}))}))}function C(t,e,o,n,i){k.map((function(t,n){n===e&&(t.bookState=o)})),t.textContent=o,t.classList.remove(n),t.classList.add(i)}function E(){var t="".concat(k.length," book(s) :::  Click on the books to get their descriptions!");if(k.length>0){var o=k.filter((function(t){return"Your Book here!"!==t.title}));a(o),_(),y(),T(),h("h4",t,"booklist-partition__desc-text2")}else{var n=new e("Your Book here!","This is also for you! :-)","All that you need: ","not read yet");k.push(n),a(k),T(),h("h4",t,"booklist-partition__desc-text2")}}k.push(g,m,f,v),E(),p.addEventListener("click",(function(){console.log("test about sec"),c("h3","Welcome, to the JS-Library and fell free share your books here!","message-board-msg")})),b.addEventListener("click",(function(){var t=document.getElementById("title"),o=document.getElementById("author"),n=document.getElementById("num-pages"),i=document.getElementById("is-read");console.log("input checked value: ",i.checked),function(t,o,n,i){if(t&&o){n||(n=0),console.log("input checked value: ",i);var a=new e(t,o,n,i=i?"already read":"not read yet");k.push(a),console.log(k)}else console.log("Please, fill all the required fields: TITLE and AUTHOR"),c("h4","Please, fill all the required fields: TITLE and AUTHOR","message-board-validation")}(t.value,o.value,n.value,i.checked);var r='Your book "'.concat(t.value,'" was added to the JS-LIBRARY!');!function(t,e,o,n){t.value="",e.value="",o.value="",n.checked=!1}(t,o,n,i);var l=k.filter((function(t){return"Your Book here!"!==t.title}));a(l),_(),y(),T(),h("h4",r,"booklist-partition__desc-text2")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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V1UsaUJBQWlCLFNBQVMsV0FFcEMsSUFBTTBCLEVBQVlwRixTQUFTaUIsZUFBZSxTQUNwQ29FLEVBQWFyRixTQUFTaUIsZUFBZSxVQUNyQ3FFLEVBQVl0RixTQUFTaUIsZUFBZSxhQUNwQ3NFLEVBQWV2RixTQUFTaUIsZUFBZSxXQUU3Q3VCLFFBQVFDLElBQUksd0JBQXlCOEMsRUFBYUMsU0F3Rm5ELFNBQTBCdEgsRUFBT0MsRUFBUUMsRUFBVXFILEdBQ2pELEdBQUl2SCxHQUFTQyxFQUFRLENBQ2hCQyxJQUNKQSxFQUFXLEdBR1pvRSxRQUFRQyxJQUFJLHdCQUF5QmdELEdBT3JDLElBQU1wRSxFQUFPLElBQUlwRCxFQUFLQyxFQUFPQyxFQUFRQyxFQUxwQ3FILEVBREdBLEVBQ1MsZUFFQSxnQkFLYnhDLEVBQVVpQyxLQUFLN0QsR0FFZm1CLFFBQVFDLElBQUlRLEVBQ1osTUFDQVQsUUFBUUMsSUFBUiwwREFJQTBDLEVBQWlCLEtBRkgseURBRWtCLDJCQUVqQyxDQS9HQU8sQ0FBaUJOLEVBQVV2RSxNQUFPd0UsRUFBV3hFLE1BQU95RSxFQUFVekUsTUFBTzBFLEVBQWFDLFNBRS9FLElBQUlULEVBQWUsY0FBSCxPQUFpQkssRUFBVXZFLE1BQTNCLG1DQTRIcEIsU0FBd0J1RSxFQUFXQyxFQUFZQyxFQUFXQyxHQUN6REgsRUFBVXZFLE1BQVEsR0FDbEJ3RSxFQUFXeEUsTUFBUSxHQUNuQnlFLEVBQVV6RSxNQUFRLEdBQ2xCMEUsRUFBYUMsU0FBVSxDQUN2QixDQS9IQUcsQ0FBZVAsRUFBV0MsRUFBWUMsRUFBV0MsR0FFOUMsSUFBSVAsRUFBTy9CLEVBQVVlLFFBQU8sU0FBQTNDLEdBQUksTUFBbUIsb0JBQWZBLEVBQUtuRCxLQUFULElBR25Dd0csRUFBYU0sR0FHYjFCLElBQ0FZLElBQ0FLLElBR0dOLEVBQWMsS0FBTWMsRUFBYyxpQ0FDckMsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2phdmFzY3JpcHQtYm9va3NoZWxmLW9vcC8uL3NyYy9tb2RlbC9Cb29rLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtYm9va3NoZWxmLW9vcC8uL3NyYy9jb21wb25lbnRzL2F1eFVJRnVuY3Rpb25zLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtYm9va3NoZWxmLW9vcC8uL3NyYy9jb21wb25lbnRzL0Jvb2tsaXN0LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtYm9va3NoZWxmLW9vcC8uL3NyYy9jb21wb25lbnRzL01lc3NhZ2VCb2FyZC5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LWJvb2tzaGVsZi1vb3AvLi9zcmMvY29tcG9uZW50cy9Cb29rRGVzYy5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LWJvb2tzaGVsZi1vb3AvLi9zcmMvbXktanNMaWJyYXJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEJvb2sodGl0bGUsIGF1dGhvciwgbnVtUGFnZXMsIGJvb2tTdGF0ZSkge1xuXHR0aGlzLnRpdGxlID0gdGl0bGU7XG5cdHRoaXMuYXV0aG9yID0gYXV0aG9yO1xuXHR0aGlzLmNvYXV0aG9ycyA9IFtdO1xuXHR0aGlzLm51bVZvbHVtZXMgPSAxO1xuXHR0aGlzLnB1Ymxpc2hlciA9ICdGYW50YXN0aWMgQm9va3NoZWxmJztcblx0dGhpcy5ib29rVHlwZSA9ICdoYXJkIGNvcnZlcic7XG5cdHRoaXMuYm9va0NhdGVnb3J5ID0gJ2ZpY3Rpb24nO1xuXHR0aGlzLmVkaXRpb24gPSAxO1xuXHR0aGlzLnJlbGVhc2VZZWFyID0gbmV3IERhdGUoKTtcblx0dGhpcy5udW1QYWdlcyA9IG51bVBhZ2VzO1xuXHR0aGlzLmJvb2tTdGF0ZSA9IGJvb2tTdGF0ZTtcblx0dGhpcy5kYXRlID0gbmV3IERhdGUoKVxuXHR0aGlzLmxhc3RDaGFuZ2UgPSBuZXcgRGF0ZSgpO1xuXHRcblx0dGhpcy5ib29rRGVzYyA9IGBMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0LiBTZWQgcGVsbGVudGVzcXVlLCBkb2xvciBhYyBzdXNjaXBpdCB2b2x1dHBhdCwgdXJuYSBvZGlvIHN1c2NpcGl0IHRvcnRvciwgdXQgY29uZGltZW50dW0gbWV0dXMgbnVsbGEgc29kYWxlcyBuaXNsLiBOdWxsYW0gcG9ydHRpdG9yIGZpbmlidXMgbWV0dXMgdXQgZmF1Y2lidXMuYDtcbn0gXG5cbkJvb2sucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbigpIHtcblx0Y29uc3Qgc2hvcnREZXNjID0gYFRoZSBib29rIFwiJHt0aGlzLnRpdGxlfVwiIGJ5ICR7dGhpcy5hdXRob3J9IGhhcyAke3RoaXMubnVtUGFnZXN9IHBhZ2VzIGluICR7dGhpcy5udW1Wb2x1bWVzfSB2b2x1bWUocykuIEl0IGlzIGFib3V0ICR7dGhpcy5ib29rQ2F0ZWdvcnkudG9VcHBlckNhc2UoKX0gYW5kIHdhcyBwdWJsaXNoZWQgaW4gdGhlIGZvcm1hdCBcIiR7dGhpcy5ib29rVHlwZX1cIiBieSAke3RoaXMucHVibGlzaGVyfSBlZGl0b3JzLCBpbiB0aGUgeWVhciAke3RoaXMucmVsZWFzZVllYXIuZ2V0RnVsbFllYXIoKX0vJHt0aGlzLnJlbGVhc2VZZWFyLmdldE1vbnRoKCkgKyAxfS8ke3RoaXMucmVsZWFzZVllYXIuZ2V0RGF0ZSgpfSAtIFwiJHt0aGlzLmJvb2tTdGF0ZS50b1VwcGVyQ2FzZSgpfVwiIDo6OiAke3RoaXMuYm9va0Rlc2N9XG5cdGA7XG5cdFx0XHRcblx0cmV0dXJuIHNob3J0RGVzYztcbn1cblxuQm9vay5wcm90b3R5cGUuZGVzY3JpcHRpb24gPSBmdW5jdGlvbigpIHtcblx0Y29uc3QgYmlnRGVzYyA9IGAke3RoaXMuYXV0aG9yfSAncyAke3RoaXMudGl0bGV9IGlzIGEgYm9vayBhYm91dDogJHt0aGlzLmJvb2tEZXNjfWA7XG5cdFxuXHRyZXR1cm4gYmlnRGVzYztcbn1cblxuZXhwb3J0IGRlZmF1bHQgQm9vaztcbiIsImZ1bmN0aW9uIGNyZWF0ZURPTU5vZGUobm9kZSA9ICdwJywgaHRtbFRleHQsIGNzc0NsYXNzLCBjc3NJZCwgY3NzUHJvcHMpIHtcblx0bGV0IG5ld05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGUpO1xuXHRcblx0aWYgKGh0bWxUZXh0KSB7XG5cdFx0Y29uc3QgdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShodG1sVGV4dCk7XG5cdFx0XG5cdFx0bmV3Tm9kZS5hcHBlbmRDaGlsZCh0ZXh0Tm9kZSk7XG5cdH1cblx0XG5cdGlmIChjc3NDbGFzcykge1xuXHRcdG5ld05vZGUuY2xhc3NMaXN0LmFkZChjc3NDbGFzcyk7XG5cdH1cblx0XG5cdGlmIChjc3NJZCkge1xuXHRcdG5ld05vZGUuaWQgPSBjc3NJZDtcblx0fVxuXHRcblx0Ly9jb25zb2xlLmxvZyhjc3NQcm9wcyk7XG5cdC8vY29uc29sZS5sb2coQXJyYXkuaXNBcnJheShjc3NQcm9wcykpO1xuXHRpZiAoQXJyYXkuaXNBcnJheShjc3NQcm9wcykpIHtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGNzc1Byb3BzLmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0XHRuZXdOb2RlW2Nzc1Byb3BzW2ldLnByb3BdID0gY3NzUHJvcHNbaV0udmFsdWU7XG5cdFx0fVxuXHR9XG5cdFxuXHRyZXR1cm4gbmV3Tm9kZTtcbn1cblxuXG5mdW5jdGlvbiBwcmludE1zZyhub2RlLCBtc2csIGNzc0NsYXNzKSB7XG5cdGxldCBtZXNzYWdlID0gbXNnO1xuXHRcblx0bGV0IG5ld1VJTm9kZSA9IGNyZWF0ZURPTU5vZGUoXG5cdG5vZGUsIG1lc3NhZ2UsIGNzc0NsYXNzKTtcblx0XG5cdHJldHVybiBuZXdVSU5vZGU7XG59XG5cblxuZXhwb3J0IHtcbiAgICBjcmVhdGVET01Ob2RlLFxuXHRcdHByaW50TXNnLFxufTtcblxuXG4iLCJpbXBvcnQgeyBjcmVhdGVET01Ob2RlIH0gZnJvbSAnLi9hdXhVSUZ1bmN0aW9ucy5qcyc7XG5cblxuLy8gVUkgbm9kZXNcbmNvbnN0IGJvb2tTaGVsZiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29rbGlzdCcpO1xuXG5mdW5jdGlvbiBzaG93Qm9va2xpc3QobGlzdCkge1xuXHRib29rU2hlbGYuaW5uZXJIVE1MID0gbnVsbDtcblx0XG5cdGxldCBuZXdOb2RlID0gbGlzdC5tYXAoKGJvb2ssIGlkeCkgPT4ge1xuXHRcdC8vIENyZWF0ZSBlbGVtZW50cyBhbmQgaXRzIHByb3BlcnRpZXNcblx0XHRjb25zdCBsaSA9IGNyZWF0ZURPTU5vZGUoJ2xpJywgJycsICdib29rbGlzdC1wYXJ0aXRpb25fX2Jvb2snKTtcdFxuXHRcdGNvbnN0IGltZyA9IGNyZWF0ZURPTU5vZGUoJ2ltZycsICcnLCAnYm9va2xpc3QtcGFydGl0aW9uX19pY29uJywgJycsIFt7IHByb3A6ICdzcmMnLCB2YWx1ZTogJy4vcHVibGljL2ltYWdlcy9pY29uczgtYm9vay02NC5wbmcnIH0sIHsgcHJvcDogJ2FsdCcsIHZhbHVlOiAnYm9va3MgaWNvbicgfV0pO1xuXHRcdGNvbnN0IGRpdiA9IGNyZWF0ZURPTU5vZGUoJ2RpdicsICcnLCAnYm9va2xpc3QtcGFydGl0aW9uX19ib29rLWNvbnRlbnQnKTtcblx0XHRjb25zdCBoMyA9IGNyZWF0ZURPTU5vZGUoJ2gzJywgYm9vay50aXRsZSwgJ2Jvb2tsaXN0LXBhcnRpdGlvbl9fdGl0bGUnICk7XG5cdFx0Y29uc3Qgc3BhbkRlc2NCdG4gPSBjcmVhdGVET01Ob2RlKCdzcGFuJywgJ2knLCAnYm9va2xpc3QtcGFydGl0aW9uX19ib29rZGVzYy1idG4nKTtcblx0XHRjb25zdCBoNSA9IGNyZWF0ZURPTU5vZGUoJ2g1JywgYm9vay5hdXRob3IsICdib29rbGlzdC1wYXJ0aXRpb25fX2F1dGhvcicpO1xuXHRcdGNvbnN0IHBhcmExID0gY3JlYXRlRE9NTm9kZSgncCcsIGAke2Jvb2subnVtUGFnZXN9IHBhZ2VzYCwgJ2Jvb2tsaXN0LXBhcnRpdGlvbl9fcGFnZXMnKTtcblx0XHRcblx0XHRsZXQgc3Bhbjtcblx0XHRpZiAoYm9vay5ib29rU3RhdGUgPT09ICdhbHJlYWR5IHJlYWQnKSB7XG5cdFx0XHRzcGFuID0gY3JlYXRlRE9NTm9kZSgnc3BhbicsIGJvb2suYm9va1N0YXRlLCAnYm9va2xpc3QtcGFydGl0aW9uX19ib29rLXJlYWQnLCAnYm9vay1ub3RlJyk7XHRcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3BhbiA9IGNyZWF0ZURPTU5vZGUoJ3NwYW0nLCBib29rLmJvb2tTdGF0ZSwgJ2Jvb2tsaXN0LXBhcnRpdGlvbl9fYm9vay1ub3QtcmVhZCcsICdib29rLW5vdGUnKTtcblx0XHR9XG5cdFx0XG5cdFx0XG5cdFx0Y29uc3QgcmVtb3ZlQnRuID0gY3JlYXRlRE9NTm9kZSgnYnV0dG9uJywgJ1gnLCAnYm9va2xpc3QtcGFydGl0aW9uX19yZW1vdmUtYnRuJywgJycpO1xuXHRcdFxuXHRcdC8vIFNldCBnbG9iYWwgZGF0YSBhdHRyaWJ1dGVcblx0XHRzcGFuRGVzY0J0bi5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBpZHgpO1xuXHRcdHJlbW92ZUJ0bi5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBpZHgpO1xuXHRcdHNwYW4uc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgaWR4KTtcblx0XHRcblx0XHQvLyBBc3NlbWJsZSB0aGUgY29tcG9uZW50XHRcdFxuXHRcdGgzLmFwcGVuZENoaWxkKHNwYW5EZXNjQnRuKTtcblx0XHRcblx0XHRkaXYuYXBwZW5kQ2hpbGQoaDMpO1xuXHRcdGRpdi5hcHBlbmRDaGlsZChoNSk7XG5cdFx0ZGl2LmFwcGVuZENoaWxkKHBhcmExKTtcblx0XHRkaXYuYXBwZW5kQ2hpbGQoc3Bhbik7XG5cdFx0XHRcblx0XHRsaS5hcHBlbmRDaGlsZChpbWcpO1xuXHRcdGxpLmFwcGVuZENoaWxkKGRpdik7XG5cdFx0bGkuYXBwZW5kQ2hpbGQocmVtb3ZlQnRuKTtcblx0XHRcblx0XHRib29rU2hlbGYuYXBwZW5kQ2hpbGQobGkpO1xuXHRcdFxuXHRcdHJldHVybiBsaTtcblx0fSk7XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgc2hvd0Jvb2tsaXN0O1xuXG4iLCJpbXBvcnQgeyBjcmVhdGVET01Ob2RlLCBwcmludE1zZyB9IGZyb20gJy4vYXV4VUlGdW5jdGlvbnMuanMnO1xuXG5cbi8vIFVJIG5vZGVzXG5jb25zdCBtZXNzYWdlQm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGlkZGVuLW1lc3NhZ2UtYm9hcmQnKTtcbmNvbnN0IHRoaXJkV2FsbE9ybmFtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvb2stc3RhY2tfX29ybmFtZW50MycpO1xuXG5sZXQgbXNnID0gJ1dlbGNvbWUsIGZlbGwgZnJlZSB0byBwb3N0IHlvdXIgYm9va3MgaGVyZSEgOi0pJztcblxuZnVuY3Rpb24gc2hvd01lc3NhZ2VCb2FyZChub2RlLCBtZXNzYWdlID0gbXNnLCBjc3NDbGFzcykge1xuXHRcblx0bGV0IG5ld1VJTm9kZSA9IHByaW50TXNnKG5vZGUsIG1lc3NhZ2UsIGNzc0NsYXNzKTtcblx0XG5cdG1lc3NhZ2VCb2FyZC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0XG5cdGNvbnNvbGUubG9nKHRoaXJkV2FsbE9ybmFtZW50KTtcblx0XG5cdG1lc3NhZ2VCb2FyZC5hcHBlbmRDaGlsZChuZXdVSU5vZGUpO1xuXHRcblx0Y29uc3QgbXNnVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdG1lc3NhZ2VCb2FyZC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG5cdFx0bWVzc2FnZUJvYXJkLmlubmVySFRNTCA9IG51bGw7XG5cdH1cblx0LCA1MDAwKTtcbn1cblxuXG5leHBvcnQgZGVmYXVsdCBzaG93TWVzc2FnZUJvYXJkO1xuXG4iLCJpbXBvcnQgeyBjcmVhdGVET01Ob2RlLCBwcmludE1zZyB9IGZyb20gJy4vYXV4VUlGdW5jdGlvbnMuanMnO1xuXG5cbi8vIFVJIG5vZGVzXG5jb25zdCBib29rbGlzdFBhcnRpdGlvbkRlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9va2xpc3QtcGFydGl0aW9uX19ib29rLWRlc2MnKTtcblxubGV0IGRlZmF1bHRNc2cgPSAnSkFWQVNDUklQVCBCT09LU0hFTEYnO1xuXG5mdW5jdGlvbiBzaG93Qm9va0JvYXJkKG5vZGUsIG1lc3NhZ2UgPSBkZWZhdWx0TXNnLCBjc3NDbGFzcykge1xuICAgIGJvb2tsaXN0UGFydGl0aW9uRGVzYy5pbm5lckhUTUwgPSBudWxsO1xuICAgIFxuICAgICAgICBsZXQgbmV3TGlicmFyeU5vZGUgPSBwcmludE1zZygnaDInLCBkZWZhdWx0TXNnLCAnYm9va2xpc3QtcGFydGl0aW9uX19kZXNjLXRleHQxJyk7XG4gICAgICAgIGJvb2tsaXN0UGFydGl0aW9uRGVzYy5hcHBlbmRDaGlsZChuZXdMaWJyYXJ5Tm9kZSk7XG4gICAgXG4gICAgICAgIGxldCBuZXdCb29rTm9kZSA9IHByaW50TXNnKG5vZGUsIG1lc3NhZ2UsIGNzc0NsYXNzKTtcbiAgICAgICAgYm9va2xpc3RQYXJ0aXRpb25EZXNjLmFwcGVuZENoaWxkKG5ld0Jvb2tOb2RlKTtcbn1cblxuXG5leHBvcnQgZGVmYXVsdCBzaG93Qm9va0JvYXJkO1xuXG4iLCIvKlxuKiBcbiovXG5pbXBvcnQgQm9vayBmcm9tICcuL21vZGVsL0Jvb2suanMnO1xuaW1wb3J0IHNob3dCb29rbGlzdCBmcm9tICcuL2NvbXBvbmVudHMvQm9va2xpc3QuanMnO1xuaW1wb3J0IHNob3dNZXNzYWdlQm9hcmQgZnJvbSAnLi9jb21wb25lbnRzL01lc3NhZ2VCb2FyZC5qcyc7XG5pbXBvcnQgc2hvd0Jvb2tCb2FyZCBmcm9tICcuL2NvbXBvbmVudHMvQm9va0Rlc2MuanMnO1xuXG5cbi8vIFVJIG5vZGVzXG5jb25zdCBhYm91dFNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVzY3JpcHRpb24tcGFydGl0aW9uX19hYm91dCcpO1xuY29uc3QgYWRkQm9va0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtYm9vaycpO1xuY29uc3QgYm9va3NoZWxmQm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9vay1kZXNjJyk7XG5cblxubGV0IG15TGlicmFyeSA9IFtdO1xuXG5jb25zdCB0aGVIb2JiaXQgPSBuZXcgQm9vaygnVGhlIEhvYmJpdCcsICdKLlIuUi4gVG9sa2llbicsIDI5NSwgJ2FscmVhZHkgcmVhZCcpO1xuY29uc3QgdGhlRmVsbG93c2hpcCA9IG5ldyBCb29rKCdUaGUgRmVsbG93c2hpcCBvZiB0aGUgUmluZycsICdKLlIuUi4gVG9sa2llbicsIDM5NSwgJ25vdCByZWFkIHlldCcpO1xuY29uc3QgdGhlVHdvVG93ZXJzID0gbmV3IEJvb2soJ1RoZSBUd28gVG93ZXJzJywgJ0ouUi5SLiBUb2xraWVuJywgMzk1LCAnbm90IHJlYWQgeWV0Jyk7XG5jb25zdCB0aGVSZXR1cm5PZlRoZUtpbmcgPSBuZXcgQm9vaygnVGhlIFJldHVybiBvZiB0aGUgS2luZycsICdKLlIuUi4gVG9sa2llbicsIDM5NSwgJ25vdCByZWFkIHlldCcpO1xuXG5teUxpYnJhcnkucHVzaCh0aGVIb2JiaXQsIHRoZUZlbGxvd3NoaXAsIHRoZVR3b1Rvd2VycywgdGhlUmV0dXJuT2ZUaGVLaW5nKTtcbmNoZWNrTGlicmFyeSgpO1xuXG5cbmFib3V0U2VjdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0Y29uc29sZS5sb2coJ3Rlc3QgYWJvdXQgc2VjJyk7XG5cdGxldCBtZXNzYWdlID0gJ1dlbGNvbWUsIHRvIHRoZSBKUy1MaWJyYXJ5IGFuZCBmZWxsIGZyZWUgc2hhcmUgeW91ciBib29rcyBoZXJlISc7XG5cdFxuXHRzaG93TWVzc2FnZUJvYXJkKCdoMycsIG1lc3NhZ2UsICdtZXNzYWdlLWJvYXJkLW1zZycpO1xufSk7XG5cblxuYWRkQm9va0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0Ly8gRm9ybSBub2Rlc1xuXHRjb25zdCBub2RlVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGUnKTtcblx0Y29uc3Qgbm9kZUF1dGhvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRob3InKTtcblx0Y29uc3Qgbm9kZVBhZ2VzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ251bS1wYWdlcycpO1xuXHRjb25zdCBub2RlQm9va05vdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXMtcmVhZCcpO1xuXHRcblx0Y29uc29sZS5sb2coJ2lucHV0IGNoZWNrZWQgdmFsdWU6ICcsIG5vZGVCb29rTm90ZS5jaGVja2VkKTtcblx0XG5cdGFkZEJvb2tUb0xpYnJhcnkobm9kZVRpdGxlLnZhbHVlLCBub2RlQXV0aG9yLnZhbHVlLCBub2RlUGFnZXMudmFsdWUsIG5vZGVCb29rTm90ZS5jaGVja2VkKTtcblx0XG4gICAgbGV0IGJvb2tCb2FyZE1zZyA9IGBZb3VyIGJvb2sgXCIke25vZGVUaXRsZS52YWx1ZX1cIiB3YXMgYWRkZWQgdG8gdGhlIEpTLUxJQlJBUlkhYDtcbiAgICBcblx0Y2xlYXJGb3JtU2hlZXQobm9kZVRpdGxlLCBub2RlQXV0aG9yLCBub2RlUGFnZXMsIG5vZGVCb29rTm90ZSk7XG5cdFxuICAgIGxldCB0ZW1wID0gbXlMaWJyYXJ5LmZpbHRlcihib29rID0+IGJvb2sudGl0bGUgIT09ICdZb3VyIEJvb2sgaGVyZSEnKTtcbiAgICBcblx0Ly8gUmVuZGVyIGxpYnJhcnlcblx0c2hvd0Jvb2tsaXN0KHRlbXApO1xuXHRcblx0Ly8gUGFzcyBFdmVudGxpc3RlbmVyc1xuXHRnZXRCb29rRGVzYygpO1xuXHRjaGFuZ2VCb29rTm90ZXMoKTtcblx0cmVtb3ZlQm9va3MoKTtcbiAgICBcbiAgICAvLyBTaG93IGJvb2tzaGVsZkJvYXJkXG4gICAgc2hvd0Jvb2tCb2FyZCgnaDQnLCBib29rQm9hcmRNc2csICdib29rbGlzdC1wYXJ0aXRpb25fX2Rlc2MtdGV4dDInKTtcbn0pOyBcblxuXG5mdW5jdGlvbiBnZXRCb29rRGVzYygpIHtcbiAgICBjb25zdCBkZXNjQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ib29rbGlzdC1wYXJ0aXRpb25fX2Jvb2tkZXNjLWJ0bicpO1xuXG4gICAgZGVzY0J0bnMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgICAgIC8vY29uc29sZS5kaXIoZS50YXJnZXQpO1xuICAgICAgICAgICAgbGV0IGJ0bklkID0gTnVtYmVyKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGJ0bklkKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IGJvb2sgPSBteUxpYnJhcnkuZmlsdGVyKChib29rLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaWR4ID09PSBidG5JZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYm9vaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSBib29rWzBdLmRlc2NyaXB0aW9uKCk7XG5cbiAgICAgICAgICAgIHNob3dCb29rQm9hcmQoJ2g0JywgYm9va1swXS5pbmZvKCksICdib29rbGlzdC1wYXJ0aXRpb25fX2Rlc2MtdGV4dCcpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuXG5mdW5jdGlvbiBjaGFuZ2VCb29rTm90ZXMoKSB7XG5cdGNvbnN0IGJvb2tOb3RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNib29rLW5vdGUnKTtcblx0XG5cdGJvb2tOb3Rlcy5mb3JFYWNoKG5vdGUgPT4ge1xuXHRcdG5vdGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcblx0XHRcdC8vY29uc29sZS5kaXIoZS50YXJnZXQpO1xuXHRcdFx0bGV0IG5vdGVJZCA9IE51bWJlcihlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSk7XG5cdFx0XHRjb25zb2xlLmxvZyhub3RlSWQpO1xuXHRcdFx0XG5cdFx0XHRpZiAoZS50YXJnZXQudGV4dENvbnRlbnQgPT09ICdhbHJlYWR5IHJlYWQnKSB7XG5cdFx0XHRcdGNoZWNrQm9va05vdGUoZS50YXJnZXQsIG5vdGVJZCwgJ25vdCByZWFkIHlldCcsICdib29rbGlzdC1wYXJ0aXRpb25fX2Jvb2stcmVhZCcsICdib29rbGlzdC1wYXJ0aXRpb25fX2Jvb2stbm90LXJlYWQnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNoZWNrQm9va05vdGUoZS50YXJnZXQsIG5vdGVJZCwgJ2FscmVhZHkgcmVhZCcsICdib29rbGlzdC1wYXJ0aXRpb25fX2Jvb2stbm90LXJlYWQnLCAnYm9va2xpc3QtcGFydGl0aW9uX19ib29rLXJlYWQnKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59XG5cblxuZnVuY3Rpb24gcmVtb3ZlQm9va3MoKSB7XG5cdGNvbnN0IHJlbW92ZUJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYm9va2xpc3QtcGFydGl0aW9uX19yZW1vdmUtYnRuJyk7XG5cdFxuXHRyZW1vdmVCdG5zLmZvckVhY2goYnRuID0+IHtcblx0XHRidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcblx0XHRcdGNvbnNvbGUubG9nKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpKTtcblx0XHRcdGxldCBidG5JbmRleCA9IE51bWJlcihlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSk7XG5cdFx0XHRcblx0XHRcdHJlbW92ZUJvb2tmcm9tTGlicmFyeShidG5JbmRleCk7XG5cdFx0XHRcblx0XHRcdC8vIFJlbmRlciBCb29rbGlzdFxuXHRcdFx0c2hvd0Jvb2tsaXN0KG15TGlicmFyeSk7XG5cdFx0XHRcblx0XHRcdC8vIFBhc3MgRXZlbnRsaXN0ZW5lcnNcblx0XHRcdGdldEJvb2tEZXNjKCk7XG5cdFx0XHRjaGFuZ2VCb29rTm90ZXMoKTtcblx0XHRcdHJlbW92ZUJvb2tzKCk7XG5cdFx0XHRjaGVja0xpYnJhcnkoKTtcblx0XHR9KTtcblx0fSk7XHRcbn0gIFxuXG5cbmZ1bmN0aW9uIGFkZEJvb2tUb0xpYnJhcnkodGl0bGUsIGF1dGhvciwgbnVtUGFnZXMsIGJvb2tzUmVhZCkge1xuICBpZiAodGl0bGUgJiYgYXV0aG9yKSB7XG5cdFx0aWYgKCFudW1QYWdlcykge1xuXHRcdFx0bnVtUGFnZXMgPSAwO1xuXHRcdH1cblx0XHRcblx0XHRjb25zb2xlLmxvZygnaW5wdXQgY2hlY2tlZCB2YWx1ZTogJywgYm9va3NSZWFkKTtcblx0XHRpZiAoYm9va3NSZWFkKSB7XG5cdFx0XHRib29rc1JlYWQgPSAnYWxyZWFkeSByZWFkJztcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ym9va3NSZWFkID0gJ25vdCByZWFkIHlldCc7XG5cdFx0fVxuXHRcdFxuXHRcdGNvbnN0IGJvb2sgPSBuZXcgQm9vayh0aXRsZSwgYXV0aG9yLCBudW1QYWdlcywgYm9va3NSZWFkKTtcblx0XHRcblx0XHRteUxpYnJhcnkucHVzaChib29rKTtcblx0XHRcblx0XHRjb25zb2xlLmxvZyhteUxpYnJhcnkpO1xuXHR9IGVsc2Uge1xuXHRcdGNvbnNvbGUubG9nKGBQbGVhc2UsIGZpbGwgYWxsIHRoZSByZXF1aXJlZCBmaWVsZHM6IFRJVExFIGFuZCBBVVRIT1JgKTtcblx0XHRcblx0XHRsZXQgbWVzc2FnZSA9ICdQbGVhc2UsIGZpbGwgYWxsIHRoZSByZXF1aXJlZCBmaWVsZHM6IFRJVExFIGFuZCBBVVRIT1InO1xuXHRcdFxuXHRcdHNob3dNZXNzYWdlQm9hcmQoJ2g0JywgbWVzc2FnZSwgJ21lc3NhZ2UtYm9hcmQtdmFsaWRhdGlvbicpO1xuXHR9ICBcbn1cblxuXG5mdW5jdGlvbiByZW1vdmVCb29rZnJvbUxpYnJhcnkoYm9va0luZGV4KSB7XG5cdG15TGlicmFyeSA9IG15TGlicmFyeS5maWx0ZXIoKGJvb2ssIGlkeCkgPT4ge1xuXHRcdGlmIChpZHggIT09IGJvb2tJbmRleCkge1xuXHRcdFx0cmV0dXJuIGJvb2s7XG5cdFx0fVxuXHR9KTtcblx0XHRcblx0Y29uc29sZS5sb2cobXlMaWJyYXJ5KTtcbn1cblxuXG4vKiBBVVhJTElBUlkgRlVOQ1RJT05TICovXG5mdW5jdGlvbiBjbGVhckZvcm1TaGVldChub2RlVGl0bGUsIG5vZGVBdXRob3IsIG5vZGVQYWdlcywgbm9kZUJvb2tOb3RlKSB7XG5cdG5vZGVUaXRsZS52YWx1ZSA9ICcnO1xuXHRub2RlQXV0aG9yLnZhbHVlID0gJyc7XG5cdG5vZGVQYWdlcy52YWx1ZSA9ICcnO1xuXHRub2RlQm9va05vdGUuY2hlY2tlZCA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBjaGVja0Jvb2tOb3RlKG5vZGUsIG5vdGVJZCwgbm90ZSwgY3NzVG9SZW1vdmUsIGNzc1RvQWRkKSB7XG5cdG15TGlicmFyeS5tYXAoKGJvb2ssIGlkeCkgPT4ge1xuXHRcdGlmIChpZHggPT09IG5vdGVJZCkge1xuXHRcdFx0Ym9vay5ib29rU3RhdGUgPSBub3RlO1xuXHRcdH1cblx0fSk7XG5cdFxuXHRub2RlLnRleHRDb250ZW50ID0gbm90ZTtcblx0bm9kZS5jbGFzc0xpc3QucmVtb3ZlKGNzc1RvUmVtb3ZlKTtcblx0bm9kZS5jbGFzc0xpc3QuYWRkKGNzc1RvQWRkKTtcbn1cblxuZnVuY3Rpb24gY2hlY2tMaWJyYXJ5KCkge1xuXHRsZXQgYm9va0JvYXJkTXNnID0gYCR7bXlMaWJyYXJ5Lmxlbmd0aH0gYm9vayhzKSA6OjogIENsaWNrIG9uIHRoZSBib29rcyB0byBnZXQgdGhlaXIgZGVzY3JpcHRpb25zIWA7XG4gICAgXG4gICAgaWYgKG15TGlicmFyeS5sZW5ndGggPiAwKSB7XG5cdFx0bGV0IHRlbXAgPSBteUxpYnJhcnkuZmlsdGVyKGJvb2sgPT4gYm9vay50aXRsZSAhPT0gJ1lvdXIgQm9vayBoZXJlIScpO1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIC8vIFJlbmRlciBsaWJyYXJ5XG5cdFx0c2hvd0Jvb2tsaXN0KHRlbXApO1xuXHRcdFxuXHRcdC8vIFBhc3MgRXZlbnRsaXN0ZW5lcnNcblx0XHRnZXRCb29rRGVzYygpO1xuXHRcdGNoYW5nZUJvb2tOb3RlcygpO1xuXHRcdHJlbW92ZUJvb2tzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBTaG93IGJvb2tzaGVsZkJvYXJkXG4gICAgICAgIHNob3dCb29rQm9hcmQoJ2g0JywgYm9va0JvYXJkTXNnLCAnYm9va2xpc3QtcGFydGl0aW9uX19kZXNjLXRleHQyJyk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3Qgc2lkZUIgPSBuZXcgQm9vaygnWW91ciBCb29rIGhlcmUhJywgJ1RoaXMgaXMgYWxzbyBmb3IgeW91ISA6LSknLCAnQWxsIHRoYXQgeW91IG5lZWQ6ICcsICdub3QgcmVhZCB5ZXQnKTtcblx0XHRteUxpYnJhcnkucHVzaChzaWRlQik7XG5cdFx0XG5cdFx0Ly8gUmVuZGVyIGxpYnJhcnlcblx0XHRzaG93Qm9va2xpc3QobXlMaWJyYXJ5KTtcblx0XHRcblx0XHQvLyBQYXNzIEV2ZW50bGlzdGVuZXJzXG5cdFx0cmVtb3ZlQm9va3MoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNob3cgYm9va3NoZWxmQm9hcmRcbiAgICAgICAgc2hvd0Jvb2tCb2FyZCgnaDQnLCBib29rQm9hcmRNc2csICdib29rbGlzdC1wYXJ0aXRpb25fX2Rlc2MtdGV4dDInKTtcblx0fVxufVxuXG5cbiJdLCJuYW1lcyI6WyJCb29rIiwidGl0bGUiLCJhdXRob3IiLCJudW1QYWdlcyIsImJvb2tTdGF0ZSIsInRoaXMiLCJjb2F1dGhvcnMiLCJudW1Wb2x1bWVzIiwicHVibGlzaGVyIiwiYm9va1R5cGUiLCJib29rQ2F0ZWdvcnkiLCJlZGl0aW9uIiwicmVsZWFzZVllYXIiLCJEYXRlIiwiZGF0ZSIsImxhc3RDaGFuZ2UiLCJib29rRGVzYyIsInByb3RvdHlwZSIsImluZm8iLCJ0b1VwcGVyQ2FzZSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZGVzY3JpcHRpb24iLCJjcmVhdGVET01Ob2RlIiwibm9kZSIsImh0bWxUZXh0IiwiY3NzQ2xhc3MiLCJjc3NJZCIsImNzc1Byb3BzIiwibmV3Tm9kZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInRleHROb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJhcHBlbmRDaGlsZCIsImNsYXNzTGlzdCIsImFkZCIsImlkIiwiQXJyYXkiLCJpc0FycmF5IiwiaSIsImxlbmd0aCIsInByb3AiLCJ2YWx1ZSIsInByaW50TXNnIiwibXNnIiwiYm9va1NoZWxmIiwiZ2V0RWxlbWVudEJ5SWQiLCJsaXN0IiwiaW5uZXJIVE1MIiwibWFwIiwiYm9vayIsImlkeCIsInNwYW4iLCJsaSIsImltZyIsImRpdiIsImgzIiwic3BhbkRlc2NCdG4iLCJoNSIsInBhcmExIiwicmVtb3ZlQnRuIiwic2V0QXR0cmlidXRlIiwibWVzc2FnZUJvYXJkIiwidGhpcmRXYWxsT3JuYW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibWVzc2FnZSIsIm5ld1VJTm9kZSIsInN0eWxlIiwiZGlzcGxheSIsImNvbnNvbGUiLCJsb2ciLCJzZXRUaW1lb3V0IiwiYm9va2xpc3RQYXJ0aXRpb25EZXNjIiwiZGVmYXVsdE1zZyIsIm5ld0xpYnJhcnlOb2RlIiwibmV3Qm9va05vZGUiLCJhYm91dFNlY3Rpb24iLCJhZGRCb29rQnRuIiwibXlMaWJyYXJ5IiwidGhlSG9iYml0IiwidGhlRmVsbG93c2hpcCIsInRoZVR3b1Rvd2VycyIsInRoZVJldHVybk9mVGhlS2luZyIsImdldEJvb2tEZXNjIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJidG4iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImJ0bklkIiwiTnVtYmVyIiwidGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwiZmlsdGVyIiwic2hvd0Jvb2tCb2FyZCIsImNoYW5nZUJvb2tOb3RlcyIsIm5vdGUiLCJub3RlSWQiLCJ0ZXh0Q29udGVudCIsImNoZWNrQm9va05vdGUiLCJyZW1vdmVCb29rcyIsImJvb2tJbmRleCIsImJ0bkluZGV4Iiwic2hvd0Jvb2tsaXN0IiwiY2hlY2tMaWJyYXJ5IiwiY3NzVG9SZW1vdmUiLCJjc3NUb0FkZCIsInJlbW92ZSIsImJvb2tCb2FyZE1zZyIsInRlbXAiLCJzaWRlQiIsInB1c2giLCJzaG93TWVzc2FnZUJvYXJkIiwibm9kZVRpdGxlIiwibm9kZUF1dGhvciIsIm5vZGVQYWdlcyIsIm5vZGVCb29rTm90ZSIsImNoZWNrZWQiLCJib29rc1JlYWQiLCJhZGRCb29rVG9MaWJyYXJ5IiwiY2xlYXJGb3JtU2hlZXQiXSwic291cmNlUm9vdCI6IiJ9