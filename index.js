(()=>{"use strict";function t(t,e,o,n){this.title=t,this.author=e,this.coauthors=[],this.numVolumes=1,this.publisher="Fantastic Bookshelf",this.bookType="hard corver",this.bookCategory="fiction",this.edition=1,this.releaseYear=new Date,this.numPages=o,this.bookState=n,this.date=new Date,this.lastChange=new Date,this.bookDesc="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed pellentesque, dolor ac suscipit volutpat, urna odio suscipit tortor, ut condimentum metus nulla sodales nisl. Nullam porttitor finibus metus ut faucibus."}t.prototype.info=function(){return'The book "'.concat(this.title,'" by ').concat(this.author," has ").concat(this.numPages," pages in ").concat(this.numVolumes," volume(s). It is about ").concat(this.bookCategory.toUpperCase(),' and was published in the format "').concat(this.bookType,'" by ').concat(this.publisher," editors, in the year ").concat(this.releaseYear.getFullYear(),"/").concat(this.releaseYear.getMonth()+1,"/").concat(this.releaseYear.getDate(),' - "').concat(this.bookState.toUpperCase(),'" ::: ').concat(this.bookDesc,"\n\t")},t.prototype.description=function(){return"".concat(this.author," 's ").concat(this.title," is a book about: ").concat(this.bookDesc)};const e=t;function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"p",e=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=document.createElement(t);if(e){var r=document.createTextNode(e);a.appendChild(r)}if(o&&a.classList.add(o),n&&(a.id=n),Array.isArray(i))for(var l=0;l<i.length;l+=1)a[i[l].prop]=i[l].value;return a}function n(t,e,n){return o(t,e,n)}var i=document.getElementById("booklist");const a=function(t){i.innerHTML=null,t.map((function(t,e){var n,a=o("li","","booklist-partition__book"),r=o("img","","booklist-partition__icon","",[{prop:"src",value:"./public/images/icons8-book-64.png"},{prop:"alt",value:"books icon"}]),l=o("div","","booklist-partition__book-content"),s=o("h3",t.title,"booklist-partition__title"),c=o("span","i","booklist-partition__bookdesc-btn"),d=o("h5",t.author,"booklist-partition__author"),u=o("p","".concat(t.numPages," pages"),"booklist-partition__pages");n="already read"===t.bookState?o("span",t.bookState,"booklist-partition__book-read","book-note"):o("spam",t.bookState,"booklist-partition__book-not-read","book-note");var h=o("button","X","booklist-partition__remove-btn","");return c.setAttribute("data-id",e),h.setAttribute("data-id",e),n.setAttribute("data-id",e),s.appendChild(c),l.appendChild(s),l.appendChild(d),l.appendChild(u),l.appendChild(n),a.appendChild(r),a.appendChild(l),a.appendChild(h),i.appendChild(a),a}))};var r=document.getElementById("hidden-message-board"),l=document.querySelector(".book-stack__ornament3"),s="Welcome, fell free to post your books here! :-)";const c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,o=arguments.length>2?arguments[2]:void 0,i=n(t,e,o);r.style.display="block",console.log(l),r.appendChild(i),setTimeout((function(){r.style.display="none",r.innerHTML=null}),5e3)};var d=document.querySelector(".booklist-partition__book-desc"),u="Click on the books to get their descriptions!";var h=document.getElementById("description-partition__about"),p=document.getElementById("add-book"),b=(document.getElementById("book-desc"),[]),k=new e("The Hobbit","J.R.R. Tolkien",295,"already read"),g=new e("The Fellowship of the Ring","J.R.R. Tolkien",395,"not read yet"),m=new e("The Two Towers","J.R.R. Tolkien",395,"not read yet"),f=new e("The Return of the King","J.R.R. Tolkien",395,"not read yet");function v(){document.querySelectorAll(".booklist-partition__bookdesc-btn").forEach((function(t){t.addEventListener("click",(function(t){var e=Number(t.target.getAttribute("data-id"));console.log(e);var o=b.filter((function(t,o){if(o===e)return t}));o[0].description(),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,o=arguments.length>2?arguments[2]:void 0;d.innerHTML=null;var i=n(t,e,o);d.appendChild(i)}("h3",o[0].info(),"booklist-partition__desc-text")}))}))}function y(){document.querySelectorAll("#book-note").forEach((function(t){t.addEventListener("click",(function(t){var e=Number(t.target.getAttribute("data-id"));console.log(e),"already read"===t.target.textContent?T(t.target,e,"not read yet","booklist-partition__book-read","booklist-partition__book-not-read"):T(t.target,e,"already read","booklist-partition__book-not-read","booklist-partition__book-read")}))}))}function _(){document.querySelectorAll(".booklist-partition__remove-btn").forEach((function(t){t.addEventListener("click",(function(t){console.log(t.target.getAttribute("data-id"));var e,o=Number(t.target.getAttribute("data-id"));e=o,b=b.filter((function(t,o){if(o!==e)return t})),console.log(b),a(b),v(),y(),_(),C()}))}))}function T(t,e,o,n,i){b.map((function(t,n){n===e&&(t.bookState=o)})),t.textContent=o,t.classList.remove(n),t.classList.add(i)}function C(){if(b.length>0)a(b),v(),y(),_();else{var t=new e("Your Book here!","This is also for you! :-)","All that you need: ","not read yet");b.push(t),a(b),v(),y(),_()}}b.push(k,g,m,f),C(),h.addEventListener("click",(function(){console.log("test about sec"),c("h3","Welcome, to the JS-Library and fell free share your books here!","message-board-msg")})),p.addEventListener("click",(function(){var t=document.getElementById("title"),o=document.getElementById("author"),n=document.getElementById("num-pages"),i=document.getElementById("is-read");console.log("input checked value: ",i.checked),function(t,o,n,i){if(t&&o){n||(n=0),console.log("input checked value: ",i);var a=new e(t,o,n,i=i?"already read":"not read yet");b.push(a),console.log(b)}else console.log("Please, fill all the required fields: TITLE and AUTHOR"),c("h4","Please, fill all the required fields: TITLE and AUTHOR","message-board-validation")}(t.value,o.value,n.value,i.checked),function(t,e,o,n){t.value="",e.value="",o.value="",n.checked=!1}(t,o,n,i),a(b),v(),y(),_()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNoQkMsSUFDSkEsRUFBVyxHQUdab0UsUUFBUUMsSUFBSSx3QkFBeUIyQyxHQU9yQyxJQUFNL0QsRUFBTyxJQUFJcEQsRUFBS0MsRUFBT0MsRUFBUUMsRUFMcENnSCxFQURHQSxFQUNTLGVBRUEsZ0JBS2J0QyxFQUFVK0IsS0FBS3hELEdBRWZtQixRQUFRQyxJQUFJSyxFQUNaLE1BQ0FOLFFBQVFDLElBQVIsMERBSUFxQyxFQUFpQixLQUZILHlEQUVrQiwyQkFFakMsQ0F6R0FPLENBQWlCTixFQUFVbEUsTUFBT21FLEVBQVduRSxNQUFPb0UsRUFBVXBFLE1BQU9xRSxFQUFhQyxTQXdIbkYsU0FBd0JKLEVBQVdDLEVBQVlDLEVBQVdDLEdBQ3pESCxFQUFVbEUsTUFBUSxHQUNsQm1FLEVBQVduRSxNQUFRLEdBQ25Cb0UsRUFBVXBFLE1BQVEsR0FDbEJxRSxFQUFhQyxTQUFVLENBQ3ZCLENBM0hBRyxDQUFlUCxFQUFXQyxFQUFZQyxFQUFXQyxHQUdqRFgsRUFBYXpCLEdBR2JLLElBQ0FZLElBQ0FLLEdBQ0EsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2phdmFzY3JpcHQtYm9va3NoZWxmLW9vcC8uL3NyYy9tb2RlbC9Cb29rLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtYm9va3NoZWxmLW9vcC8uL3NyYy9jb21wb25lbnRzL2F1eFVJRnVuY3Rpb25zLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtYm9va3NoZWxmLW9vcC8uL3NyYy9jb21wb25lbnRzL0Jvb2tsaXN0LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtYm9va3NoZWxmLW9vcC8uL3NyYy9jb21wb25lbnRzL01lc3NhZ2VCb2FyZC5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LWJvb2tzaGVsZi1vb3AvLi9zcmMvY29tcG9uZW50cy9Cb29rRGVzYy5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LWJvb2tzaGVsZi1vb3AvLi9zcmMvbXktanNMaWJyYXJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEJvb2sodGl0bGUsIGF1dGhvciwgbnVtUGFnZXMsIGJvb2tTdGF0ZSkge1xyXG5cdHRoaXMudGl0bGUgPSB0aXRsZTtcclxuXHR0aGlzLmF1dGhvciA9IGF1dGhvcjtcclxuXHR0aGlzLmNvYXV0aG9ycyA9IFtdO1xyXG5cdHRoaXMubnVtVm9sdW1lcyA9IDE7XHJcblx0dGhpcy5wdWJsaXNoZXIgPSAnRmFudGFzdGljIEJvb2tzaGVsZic7XHJcblx0dGhpcy5ib29rVHlwZSA9ICdoYXJkIGNvcnZlcic7XHJcblx0dGhpcy5ib29rQ2F0ZWdvcnkgPSAnZmljdGlvbic7XHJcblx0dGhpcy5lZGl0aW9uID0gMTtcclxuXHR0aGlzLnJlbGVhc2VZZWFyID0gbmV3IERhdGUoKTtcclxuXHR0aGlzLm51bVBhZ2VzID0gbnVtUGFnZXM7XHJcblx0dGhpcy5ib29rU3RhdGUgPSBib29rU3RhdGU7XHJcblx0dGhpcy5kYXRlID0gbmV3IERhdGUoKVxyXG5cdHRoaXMubGFzdENoYW5nZSA9IG5ldyBEYXRlKCk7XHJcblx0XHJcblx0dGhpcy5ib29rRGVzYyA9IGBMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0LiBTZWQgcGVsbGVudGVzcXVlLCBkb2xvciBhYyBzdXNjaXBpdCB2b2x1dHBhdCwgdXJuYSBvZGlvIHN1c2NpcGl0IHRvcnRvciwgdXQgY29uZGltZW50dW0gbWV0dXMgbnVsbGEgc29kYWxlcyBuaXNsLiBOdWxsYW0gcG9ydHRpdG9yIGZpbmlidXMgbWV0dXMgdXQgZmF1Y2lidXMuYDtcclxufSBcclxuXHJcbkJvb2sucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbigpIHtcclxuXHRjb25zdCBzaG9ydERlc2MgPSBgVGhlIGJvb2sgXCIke3RoaXMudGl0bGV9XCIgYnkgJHt0aGlzLmF1dGhvcn0gaGFzICR7dGhpcy5udW1QYWdlc30gcGFnZXMgaW4gJHt0aGlzLm51bVZvbHVtZXN9IHZvbHVtZShzKS4gSXQgaXMgYWJvdXQgJHt0aGlzLmJvb2tDYXRlZ29yeS50b1VwcGVyQ2FzZSgpfSBhbmQgd2FzIHB1Ymxpc2hlZCBpbiB0aGUgZm9ybWF0IFwiJHt0aGlzLmJvb2tUeXBlfVwiIGJ5ICR7dGhpcy5wdWJsaXNoZXJ9IGVkaXRvcnMsIGluIHRoZSB5ZWFyICR7dGhpcy5yZWxlYXNlWWVhci5nZXRGdWxsWWVhcigpfS8ke3RoaXMucmVsZWFzZVllYXIuZ2V0TW9udGgoKSArIDF9LyR7dGhpcy5yZWxlYXNlWWVhci5nZXREYXRlKCl9IC0gXCIke3RoaXMuYm9va1N0YXRlLnRvVXBwZXJDYXNlKCl9XCIgOjo6ICR7dGhpcy5ib29rRGVzY31cclxuXHRgO1xyXG5cdFx0XHRcclxuXHRyZXR1cm4gc2hvcnREZXNjO1xyXG59XHJcblxyXG5Cb29rLnByb3RvdHlwZS5kZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdGNvbnN0IGJpZ0Rlc2MgPSBgJHt0aGlzLmF1dGhvcn0gJ3MgJHt0aGlzLnRpdGxlfSBpcyBhIGJvb2sgYWJvdXQ6ICR7dGhpcy5ib29rRGVzY31gO1xyXG5cdFxyXG5cdHJldHVybiBiaWdEZXNjO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBCb29rO1xyXG4iLCJmdW5jdGlvbiBjcmVhdGVET01Ob2RlKG5vZGUgPSAncCcsIGh0bWxUZXh0LCBjc3NDbGFzcywgY3NzSWQsIGNzc1Byb3BzKSB7XHJcblx0bGV0IG5ld05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGUpO1xyXG5cdFxyXG5cdGlmIChodG1sVGV4dCkge1xyXG5cdFx0Y29uc3QgdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShodG1sVGV4dCk7XHJcblx0XHRcclxuXHRcdG5ld05vZGUuYXBwZW5kQ2hpbGQodGV4dE5vZGUpO1xyXG5cdH1cclxuXHRcclxuXHRpZiAoY3NzQ2xhc3MpIHtcclxuXHRcdG5ld05vZGUuY2xhc3NMaXN0LmFkZChjc3NDbGFzcyk7XHJcblx0fVxyXG5cdFxyXG5cdGlmIChjc3NJZCkge1xyXG5cdFx0bmV3Tm9kZS5pZCA9IGNzc0lkO1xyXG5cdH1cclxuXHRcclxuXHQvL2NvbnNvbGUubG9nKGNzc1Byb3BzKTtcclxuXHQvL2NvbnNvbGUubG9nKEFycmF5LmlzQXJyYXkoY3NzUHJvcHMpKTtcclxuXHRpZiAoQXJyYXkuaXNBcnJheShjc3NQcm9wcykpIHtcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgY3NzUHJvcHMubGVuZ3RoOyBpICs9IDEpIHtcclxuXHRcdFx0bmV3Tm9kZVtjc3NQcm9wc1tpXS5wcm9wXSA9IGNzc1Byb3BzW2ldLnZhbHVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gbmV3Tm9kZTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHByaW50TXNnKG5vZGUsIG1zZywgY3NzQ2xhc3MpIHtcclxuXHRsZXQgbWVzc2FnZSA9IG1zZztcclxuXHRcclxuXHRsZXQgbmV3VUlOb2RlID0gY3JlYXRlRE9NTm9kZShcclxuXHRub2RlLCBtZXNzYWdlLCBjc3NDbGFzcyk7XHJcblx0XHJcblx0cmV0dXJuIG5ld1VJTm9kZTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCB7XHJcbiAgICBjcmVhdGVET01Ob2RlLFxyXG5cdFx0cHJpbnRNc2csXHJcbn07XHJcblxyXG5cclxuIiwiaW1wb3J0IHsgY3JlYXRlRE9NTm9kZSB9IGZyb20gJy4vYXV4VUlGdW5jdGlvbnMuanMnO1xyXG5cclxuXHJcbi8vIFVJIG5vZGVzXHJcbmNvbnN0IGJvb2tTaGVsZiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29rbGlzdCcpO1xyXG5cclxuZnVuY3Rpb24gc2hvd0Jvb2tsaXN0KGxpc3QpIHtcclxuXHRib29rU2hlbGYuaW5uZXJIVE1MID0gbnVsbDtcclxuXHRcclxuXHRsZXQgbmV3Tm9kZSA9IGxpc3QubWFwKChib29rLCBpZHgpID0+IHtcclxuXHRcdC8vIENyZWF0ZSBlbGVtZW50cyBhbmQgaXRzIHByb3BlcnRpZXNcclxuXHRcdGNvbnN0IGxpID0gY3JlYXRlRE9NTm9kZSgnbGknLCAnJywgJ2Jvb2tsaXN0LXBhcnRpdGlvbl9fYm9vaycpO1x0XHJcblx0XHRjb25zdCBpbWcgPSBjcmVhdGVET01Ob2RlKCdpbWcnLCAnJywgJ2Jvb2tsaXN0LXBhcnRpdGlvbl9faWNvbicsICcnLCBbeyBwcm9wOiAnc3JjJywgdmFsdWU6ICcuL3B1YmxpYy9pbWFnZXMvaWNvbnM4LWJvb2stNjQucG5nJyB9LCB7IHByb3A6ICdhbHQnLCB2YWx1ZTogJ2Jvb2tzIGljb24nIH1dKTtcclxuXHRcdGNvbnN0IGRpdiA9IGNyZWF0ZURPTU5vZGUoJ2RpdicsICcnLCAnYm9va2xpc3QtcGFydGl0aW9uX19ib29rLWNvbnRlbnQnKTtcclxuXHRcdGNvbnN0IGgzID0gY3JlYXRlRE9NTm9kZSgnaDMnLCBib29rLnRpdGxlLCAnYm9va2xpc3QtcGFydGl0aW9uX190aXRsZScgKTtcclxuXHRcdGNvbnN0IHNwYW5EZXNjQnRuID0gY3JlYXRlRE9NTm9kZSgnc3BhbicsICdpJywgJ2Jvb2tsaXN0LXBhcnRpdGlvbl9fYm9va2Rlc2MtYnRuJyk7XHJcblx0XHRjb25zdCBoNSA9IGNyZWF0ZURPTU5vZGUoJ2g1JywgYm9vay5hdXRob3IsICdib29rbGlzdC1wYXJ0aXRpb25fX2F1dGhvcicpO1xyXG5cdFx0Y29uc3QgcGFyYTEgPSBjcmVhdGVET01Ob2RlKCdwJywgYCR7Ym9vay5udW1QYWdlc30gcGFnZXNgLCAnYm9va2xpc3QtcGFydGl0aW9uX19wYWdlcycpO1xyXG5cdFx0XHJcblx0XHRsZXQgc3BhbjtcclxuXHRcdGlmIChib29rLmJvb2tTdGF0ZSA9PT0gJ2FscmVhZHkgcmVhZCcpIHtcclxuXHRcdFx0c3BhbiA9IGNyZWF0ZURPTU5vZGUoJ3NwYW4nLCBib29rLmJvb2tTdGF0ZSwgJ2Jvb2tsaXN0LXBhcnRpdGlvbl9fYm9vay1yZWFkJywgJ2Jvb2stbm90ZScpO1x0XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRzcGFuID0gY3JlYXRlRE9NTm9kZSgnc3BhbScsIGJvb2suYm9va1N0YXRlLCAnYm9va2xpc3QtcGFydGl0aW9uX19ib29rLW5vdC1yZWFkJywgJ2Jvb2stbm90ZScpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRcclxuXHRcdGNvbnN0IHJlbW92ZUJ0biA9IGNyZWF0ZURPTU5vZGUoJ2J1dHRvbicsICdYJywgJ2Jvb2tsaXN0LXBhcnRpdGlvbl9fcmVtb3ZlLWJ0bicsICcnKTtcclxuXHRcdFxyXG5cdFx0Ly8gU2V0IGdsb2JhbCBkYXRhIGF0dHJpYnV0ZVxyXG5cdFx0c3BhbkRlc2NCdG4uc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgaWR4KTtcclxuXHRcdHJlbW92ZUJ0bi5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBpZHgpO1xyXG5cdFx0c3Bhbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBpZHgpO1xyXG5cdFx0XHJcblx0XHQvLyBBc3NlbWJsZSB0aGUgY29tcG9uZW50XHRcdFxyXG5cdFx0aDMuYXBwZW5kQ2hpbGQoc3BhbkRlc2NCdG4pO1xyXG5cdFx0XHJcblx0XHRkaXYuYXBwZW5kQ2hpbGQoaDMpO1xyXG5cdFx0ZGl2LmFwcGVuZENoaWxkKGg1KTtcclxuXHRcdGRpdi5hcHBlbmRDaGlsZChwYXJhMSk7XHJcblx0XHRkaXYuYXBwZW5kQ2hpbGQoc3Bhbik7XHJcblx0XHRcdFxyXG5cdFx0bGkuYXBwZW5kQ2hpbGQoaW1nKTtcclxuXHRcdGxpLmFwcGVuZENoaWxkKGRpdik7XHJcblx0XHRsaS5hcHBlbmRDaGlsZChyZW1vdmVCdG4pO1xyXG5cdFx0XHJcblx0XHRib29rU2hlbGYuYXBwZW5kQ2hpbGQobGkpO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gbGk7XHJcblx0fSk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBzaG93Qm9va2xpc3Q7XHJcblxyXG4iLCJpbXBvcnQgeyBjcmVhdGVET01Ob2RlLCBwcmludE1zZyB9IGZyb20gJy4vYXV4VUlGdW5jdGlvbnMuanMnO1xyXG5cclxuXHJcbi8vIFVJIG5vZGVzXHJcbmNvbnN0IG1lc3NhZ2VCb2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoaWRkZW4tbWVzc2FnZS1ib2FyZCcpO1xyXG5jb25zdCB0aGlyZFdhbGxPcm5hbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib29rLXN0YWNrX19vcm5hbWVudDMnKTtcclxuXHJcbmxldCBtc2cgPSAnV2VsY29tZSwgZmVsbCBmcmVlIHRvIHBvc3QgeW91ciBib29rcyBoZXJlISA6LSknO1xyXG5cclxuZnVuY3Rpb24gc2hvd01lc3NhZ2VCb2FyZChub2RlLCBtZXNzYWdlID0gbXNnLCBjc3NDbGFzcykge1xyXG5cdFxyXG5cdGxldCBuZXdVSU5vZGUgPSBwcmludE1zZyhub2RlLCBtZXNzYWdlLCBjc3NDbGFzcyk7XHJcblx0XHJcblx0bWVzc2FnZUJvYXJkLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG5cdFxyXG5cdGNvbnNvbGUubG9nKHRoaXJkV2FsbE9ybmFtZW50KTtcclxuXHRcclxuXHRtZXNzYWdlQm9hcmQuYXBwZW5kQ2hpbGQobmV3VUlOb2RlKTtcclxuXHRcclxuXHRjb25zdCBtc2dUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRtZXNzYWdlQm9hcmQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG5cdFx0bWVzc2FnZUJvYXJkLmlubmVySFRNTCA9IG51bGw7XHJcblx0fVxyXG5cdCwgNTAwMCk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBzaG93TWVzc2FnZUJvYXJkO1xyXG5cclxuIiwiaW1wb3J0IHsgY3JlYXRlRE9NTm9kZSwgcHJpbnRNc2cgfSBmcm9tICcuL2F1eFVJRnVuY3Rpb25zLmpzJztcclxuXHJcblxyXG4vLyBVSSBub2Rlc1xyXG5jb25zdCBib29rbGlzdFBhcnRpdGlvbkRlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9va2xpc3QtcGFydGl0aW9uX19ib29rLWRlc2MnKTtcclxuXHJcbmxldCBtc2cgPSAnQ2xpY2sgb24gdGhlIGJvb2tzIHRvIGdldCB0aGVpciBkZXNjcmlwdGlvbnMhJztcclxuXHJcbmZ1bmN0aW9uIHNob3dCb29rQm9hcmQobm9kZSwgbWVzc2FnZSA9IG1zZywgY3NzQ2xhc3MpIHtcclxuXHRib29rbGlzdFBhcnRpdGlvbkRlc2MuaW5uZXJIVE1MID0gbnVsbDtcclxuXHRcclxuXHRsZXQgbmV3VUlOb2RlID0gcHJpbnRNc2cobm9kZSwgbWVzc2FnZSwgY3NzQ2xhc3MpO1xyXG5cdFxyXG5cdGJvb2tsaXN0UGFydGl0aW9uRGVzYy5hcHBlbmRDaGlsZChuZXdVSU5vZGUpO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgc2hvd0Jvb2tCb2FyZDtcclxuXHJcbiIsIi8qXHJcbiogXHJcbiovXHJcbmltcG9ydCBCb29rIGZyb20gJy4vbW9kZWwvQm9vay5qcyc7XHJcbmltcG9ydCBzaG93Qm9va2xpc3QgZnJvbSAnLi9jb21wb25lbnRzL0Jvb2tsaXN0LmpzJztcclxuaW1wb3J0IHNob3dNZXNzYWdlQm9hcmQgZnJvbSAnLi9jb21wb25lbnRzL01lc3NhZ2VCb2FyZC5qcyc7XHJcbmltcG9ydCBzaG93Qm9va0JvYXJkIGZyb20gJy4vY29tcG9uZW50cy9Cb29rRGVzYy5qcyc7XHJcblxyXG5cclxuLy8gVUkgbm9kZXNcclxuY29uc3QgYWJvdXRTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rlc2NyaXB0aW9uLXBhcnRpdGlvbl9fYWJvdXQnKTtcclxuY29uc3QgYWRkQm9va0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtYm9vaycpO1xyXG5jb25zdCBib29rc2hlbGZCb2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib29rLWRlc2MnKTtcclxuXHJcblxyXG5sZXQgbXlMaWJyYXJ5ID0gW107XHJcblxyXG5jb25zdCB0aGVIb2JiaXQgPSBuZXcgQm9vaygnVGhlIEhvYmJpdCcsICdKLlIuUi4gVG9sa2llbicsIDI5NSwgJ2FscmVhZHkgcmVhZCcpO1xyXG5jb25zdCB0aGVGZWxsb3dzaGlwID0gbmV3IEJvb2soJ1RoZSBGZWxsb3dzaGlwIG9mIHRoZSBSaW5nJywgJ0ouUi5SLiBUb2xraWVuJywgMzk1LCAnbm90IHJlYWQgeWV0Jyk7XHJcbmNvbnN0IHRoZVR3b1Rvd2VycyA9IG5ldyBCb29rKCdUaGUgVHdvIFRvd2VycycsICdKLlIuUi4gVG9sa2llbicsIDM5NSwgJ25vdCByZWFkIHlldCcpO1xyXG5jb25zdCB0aGVSZXR1cm5PZlRoZUtpbmcgPSBuZXcgQm9vaygnVGhlIFJldHVybiBvZiB0aGUgS2luZycsICdKLlIuUi4gVG9sa2llbicsIDM5NSwgJ25vdCByZWFkIHlldCcpO1xyXG5cclxubXlMaWJyYXJ5LnB1c2godGhlSG9iYml0LCB0aGVGZWxsb3dzaGlwLCB0aGVUd29Ub3dlcnMsIHRoZVJldHVybk9mVGhlS2luZyk7XHJcbmNoZWNrTGlicmFyeSgpO1xyXG5cclxuXHJcbmFib3V0U2VjdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRjb25zb2xlLmxvZygndGVzdCBhYm91dCBzZWMnKTtcclxuXHRsZXQgbWVzc2FnZSA9ICdXZWxjb21lLCB0byB0aGUgSlMtTGlicmFyeSBhbmQgZmVsbCBmcmVlIHNoYXJlIHlvdXIgYm9va3MgaGVyZSEnO1xyXG5cdFxyXG5cdHNob3dNZXNzYWdlQm9hcmQoJ2gzJywgbWVzc2FnZSwgJ21lc3NhZ2UtYm9hcmQtbXNnJyk7XHJcbn0pO1xyXG5cclxuXHJcbmFkZEJvb2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0Ly8gRm9ybSBub2Rlc1xyXG5cdGNvbnN0IG5vZGVUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZScpO1xyXG5cdGNvbnN0IG5vZGVBdXRob3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0aG9yJyk7XHJcblx0Y29uc3Qgbm9kZVBhZ2VzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ251bS1wYWdlcycpO1xyXG5cdGNvbnN0IG5vZGVCb29rTm90ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpcy1yZWFkJyk7XHJcblx0XHJcblx0Y29uc29sZS5sb2coJ2lucHV0IGNoZWNrZWQgdmFsdWU6ICcsIG5vZGVCb29rTm90ZS5jaGVja2VkKTtcclxuXHRcclxuXHRhZGRCb29rVG9MaWJyYXJ5KG5vZGVUaXRsZS52YWx1ZSwgbm9kZUF1dGhvci52YWx1ZSwgbm9kZVBhZ2VzLnZhbHVlLCBub2RlQm9va05vdGUuY2hlY2tlZCk7XHJcblx0XHJcblx0Y2xlYXJGb3JtU2hlZXQobm9kZVRpdGxlLCBub2RlQXV0aG9yLCBub2RlUGFnZXMsIG5vZGVCb29rTm90ZSk7XHJcblx0XHJcblx0Ly8gUmVuZGVyIGxpYnJhcnlcclxuXHRzaG93Qm9va2xpc3QobXlMaWJyYXJ5KTtcclxuXHRcclxuXHQvLyBQYXNzIEV2ZW50bGlzdGVuZXJzXHJcblx0Z2V0Qm9va0Rlc2MoKTtcclxuXHRjaGFuZ2VCb29rTm90ZXMoKTtcclxuXHRyZW1vdmVCb29rcygpO1xyXG59KTtcclxuXHJcblxyXG5mdW5jdGlvbiBnZXRCb29rRGVzYygpIHtcclxuXHRjb25zdCBkZXNjQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ib29rbGlzdC1wYXJ0aXRpb25fX2Jvb2tkZXNjLWJ0bicpO1xyXG5cdFxyXG5cdGRlc2NCdG5zLmZvckVhY2goYnRuID0+IHtcclxuXHRcdGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG5cdFx0XHQvL2NvbnNvbGUuZGlyKGUudGFyZ2V0KTtcclxuXHRcdFx0bGV0IGJ0bklkID0gTnVtYmVyKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpKTtcclxuXHRcdFx0Y29uc29sZS5sb2coYnRuSWQpO1xyXG5cdFx0XHRcclxuXHRcdFx0bGV0IGJvb2sgPSBteUxpYnJhcnkuZmlsdGVyKChib29rLCBpZHgpID0+IHtcclxuXHRcdFx0XHRpZiAoaWR4ID09PSBidG5JZCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGJvb2s7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdGxldCBtZXNzYWdlID0gYm9va1swXS5kZXNjcmlwdGlvbigpO1xyXG5cdFxyXG5cdFx0XHRzaG93Qm9va0JvYXJkKCdoMycsIGJvb2tbMF0uaW5mbygpLCAnYm9va2xpc3QtcGFydGl0aW9uX19kZXNjLXRleHQnKTtcclxuXHRcdH0pO1xyXG5cdH0pO1xyXG59XHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIGNoYW5nZUJvb2tOb3RlcygpIHtcclxuXHRjb25zdCBib29rTm90ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjYm9vay1ub3RlJyk7XHJcblx0XHJcblx0Ym9va05vdGVzLmZvckVhY2gobm90ZSA9PiB7XHJcblx0XHRub3RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcblx0XHRcdC8vY29uc29sZS5kaXIoZS50YXJnZXQpO1xyXG5cdFx0XHRsZXQgbm90ZUlkID0gTnVtYmVyKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpKTtcclxuXHRcdFx0Y29uc29sZS5sb2cobm90ZUlkKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChlLnRhcmdldC50ZXh0Q29udGVudCA9PT0gJ2FscmVhZHkgcmVhZCcpIHtcclxuXHRcdFx0XHRjaGVja0Jvb2tOb3RlKGUudGFyZ2V0LCBub3RlSWQsICdub3QgcmVhZCB5ZXQnLCAnYm9va2xpc3QtcGFydGl0aW9uX19ib29rLXJlYWQnLCAnYm9va2xpc3QtcGFydGl0aW9uX19ib29rLW5vdC1yZWFkJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y2hlY2tCb29rTm90ZShlLnRhcmdldCwgbm90ZUlkLCAnYWxyZWFkeSByZWFkJywgJ2Jvb2tsaXN0LXBhcnRpdGlvbl9fYm9vay1ub3QtcmVhZCcsICdib29rbGlzdC1wYXJ0aXRpb25fX2Jvb2stcmVhZCcpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9KTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUJvb2tzKCkge1xyXG5cdGNvbnN0IHJlbW92ZUJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYm9va2xpc3QtcGFydGl0aW9uX19yZW1vdmUtYnRuJyk7XHJcblx0XHJcblx0cmVtb3ZlQnRucy5mb3JFYWNoKGJ0biA9PiB7XHJcblx0XHRidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuXHRcdFx0Y29uc29sZS5sb2coZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykpO1xyXG5cdFx0XHRsZXQgYnRuSW5kZXggPSBOdW1iZXIoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykpO1xyXG5cdFx0XHRcclxuXHRcdFx0cmVtb3ZlQm9va2Zyb21MaWJyYXJ5KGJ0bkluZGV4KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFJlbmRlciBCb29rbGlzdFxyXG5cdFx0XHRzaG93Qm9va2xpc3QobXlMaWJyYXJ5KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFBhc3MgRXZlbnRsaXN0ZW5lcnNcclxuXHRcdFx0Z2V0Qm9va0Rlc2MoKTtcclxuXHRcdFx0Y2hhbmdlQm9va05vdGVzKCk7XHJcblx0XHRcdHJlbW92ZUJvb2tzKCk7XHJcblx0XHRcdGNoZWNrTGlicmFyeSgpO1xyXG5cdFx0fSk7XHJcblx0fSk7XHRcclxufSAgXHJcblxyXG5cclxuZnVuY3Rpb24gYWRkQm9va1RvTGlicmFyeSh0aXRsZSwgYXV0aG9yLCBudW1QYWdlcywgYm9va3NSZWFkKSB7XHJcbiAgaWYgKHRpdGxlICYmIGF1dGhvcikge1xyXG5cdFx0aWYgKCFudW1QYWdlcykge1xyXG5cdFx0XHRudW1QYWdlcyA9IDA7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGNvbnNvbGUubG9nKCdpbnB1dCBjaGVja2VkIHZhbHVlOiAnLCBib29rc1JlYWQpO1xyXG5cdFx0aWYgKGJvb2tzUmVhZCkge1xyXG5cdFx0XHRib29rc1JlYWQgPSAnYWxyZWFkeSByZWFkJztcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGJvb2tzUmVhZCA9ICdub3QgcmVhZCB5ZXQnO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRjb25zdCBib29rID0gbmV3IEJvb2sodGl0bGUsIGF1dGhvciwgbnVtUGFnZXMsIGJvb2tzUmVhZCk7XHJcblx0XHRcclxuXHRcdG15TGlicmFyeS5wdXNoKGJvb2spO1xyXG5cdFx0XHJcblx0XHRjb25zb2xlLmxvZyhteUxpYnJhcnkpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRjb25zb2xlLmxvZyhgUGxlYXNlLCBmaWxsIGFsbCB0aGUgcmVxdWlyZWQgZmllbGRzOiBUSVRMRSBhbmQgQVVUSE9SYCk7XHJcblx0XHRcclxuXHRcdGxldCBtZXNzYWdlID0gJ1BsZWFzZSwgZmlsbCBhbGwgdGhlIHJlcXVpcmVkIGZpZWxkczogVElUTEUgYW5kIEFVVEhPUic7XHJcblx0XHRcclxuXHRcdHNob3dNZXNzYWdlQm9hcmQoJ2g0JywgbWVzc2FnZSwgJ21lc3NhZ2UtYm9hcmQtdmFsaWRhdGlvbicpO1xyXG5cdH0gIFxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlQm9va2Zyb21MaWJyYXJ5KGJvb2tJbmRleCkge1xyXG5cdG15TGlicmFyeSA9IG15TGlicmFyeS5maWx0ZXIoKGJvb2ssIGlkeCkgPT4ge1xyXG5cdFx0aWYgKGlkeCAhPT0gYm9va0luZGV4KSB7XHJcblx0XHRcdHJldHVybiBib29rO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdFx0XHJcblx0Y29uc29sZS5sb2cobXlMaWJyYXJ5KTtcclxufVxyXG5cclxuXHJcbi8qIEFVWElMSUFSWSBGVU5DVElPTlMgKi9cclxuZnVuY3Rpb24gY2xlYXJGb3JtU2hlZXQobm9kZVRpdGxlLCBub2RlQXV0aG9yLCBub2RlUGFnZXMsIG5vZGVCb29rTm90ZSkge1xyXG5cdG5vZGVUaXRsZS52YWx1ZSA9ICcnO1xyXG5cdG5vZGVBdXRob3IudmFsdWUgPSAnJztcclxuXHRub2RlUGFnZXMudmFsdWUgPSAnJztcclxuXHRub2RlQm9va05vdGUuY2hlY2tlZCA9IGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0Jvb2tOb3RlKG5vZGUsIG5vdGVJZCwgbm90ZSwgY3NzVG9SZW1vdmUsIGNzc1RvQWRkKSB7XHJcblx0bXlMaWJyYXJ5Lm1hcCgoYm9vaywgaWR4KSA9PiB7XHJcblx0XHRpZiAoaWR4ID09PSBub3RlSWQpIHtcclxuXHRcdFx0Ym9vay5ib29rU3RhdGUgPSBub3RlO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdFxyXG5cdG5vZGUudGV4dENvbnRlbnQgPSBub3RlO1xyXG5cdG5vZGUuY2xhc3NMaXN0LnJlbW92ZShjc3NUb1JlbW92ZSk7XHJcblx0bm9kZS5jbGFzc0xpc3QuYWRkKGNzc1RvQWRkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tMaWJyYXJ5KCkge1xyXG5cdGlmIChteUxpYnJhcnkubGVuZ3RoID4gMCkge1xyXG5cdFx0Ly8gUmVuZGVyIGxpYnJhcnlcclxuXHRcdHNob3dCb29rbGlzdChteUxpYnJhcnkpO1xyXG5cdFx0XHJcblx0XHQvLyBQYXNzIEV2ZW50bGlzdGVuZXJzXHJcblx0XHRnZXRCb29rRGVzYygpO1xyXG5cdFx0Y2hhbmdlQm9va05vdGVzKCk7XHJcblx0XHRyZW1vdmVCb29rcygpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRjb25zdCBzaWRlQiA9IG5ldyBCb29rKCdZb3VyIEJvb2sgaGVyZSEnLCAnVGhpcyBpcyBhbHNvIGZvciB5b3UhIDotKScsICdBbGwgdGhhdCB5b3UgbmVlZDogJywgJ25vdCByZWFkIHlldCcpO1xyXG5cdFx0bXlMaWJyYXJ5LnB1c2goc2lkZUIpO1xyXG5cdFx0XHJcblx0XHQvLyBSZW5kZXIgbGlicmFyeVxyXG5cdFx0c2hvd0Jvb2tsaXN0KG15TGlicmFyeSk7XHJcblx0XHRcclxuXHRcdC8vIFBhc3MgRXZlbnRsaXN0ZW5lcnNcclxuXHRcdGdldEJvb2tEZXNjKCk7XHJcblx0XHRjaGFuZ2VCb29rTm90ZXMoKTtcclxuXHRcdHJlbW92ZUJvb2tzKCk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuIl0sIm5hbWVzIjpbIkJvb2siLCJ0aXRsZSIsImF1dGhvciIsIm51bVBhZ2VzIiwiYm9va1N0YXRlIiwidGhpcyIsImNvYXV0aG9ycyIsIm51bVZvbHVtZXMiLCJwdWJsaXNoZXIiLCJib29rVHlwZSIsImJvb2tDYXRlZ29yeSIsImVkaXRpb24iLCJyZWxlYXNlWWVhciIsIkRhdGUiLCJkYXRlIiwibGFzdENoYW5nZSIsImJvb2tEZXNjIiwicHJvdG90eXBlIiwiaW5mbyIsInRvVXBwZXJDYXNlIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJkZXNjcmlwdGlvbiIsImNyZWF0ZURPTU5vZGUiLCJub2RlIiwiaHRtbFRleHQiLCJjc3NDbGFzcyIsImNzc0lkIiwiY3NzUHJvcHMiLCJuZXdOb2RlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwidGV4dE5vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImFwcGVuZENoaWxkIiwiY2xhc3NMaXN0IiwiYWRkIiwiaWQiLCJBcnJheSIsImlzQXJyYXkiLCJpIiwibGVuZ3RoIiwicHJvcCIsInZhbHVlIiwicHJpbnRNc2ciLCJtc2ciLCJib29rU2hlbGYiLCJnZXRFbGVtZW50QnlJZCIsImxpc3QiLCJpbm5lckhUTUwiLCJtYXAiLCJib29rIiwiaWR4Iiwic3BhbiIsImxpIiwiaW1nIiwiZGl2IiwiaDMiLCJzcGFuRGVzY0J0biIsImg1IiwicGFyYTEiLCJyZW1vdmVCdG4iLCJzZXRBdHRyaWJ1dGUiLCJtZXNzYWdlQm9hcmQiLCJ0aGlyZFdhbGxPcm5hbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJtZXNzYWdlIiwibmV3VUlOb2RlIiwic3R5bGUiLCJkaXNwbGF5IiwiY29uc29sZSIsImxvZyIsInNldFRpbWVvdXQiLCJib29rbGlzdFBhcnRpdGlvbkRlc2MiLCJhYm91dFNlY3Rpb24iLCJhZGRCb29rQnRuIiwibXlMaWJyYXJ5IiwidGhlSG9iYml0IiwidGhlRmVsbG93c2hpcCIsInRoZVR3b1Rvd2VycyIsInRoZVJldHVybk9mVGhlS2luZyIsImdldEJvb2tEZXNjIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJidG4iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImJ0bklkIiwiTnVtYmVyIiwidGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwiZmlsdGVyIiwic2hvd0Jvb2tCb2FyZCIsImNoYW5nZUJvb2tOb3RlcyIsIm5vdGUiLCJub3RlSWQiLCJ0ZXh0Q29udGVudCIsImNoZWNrQm9va05vdGUiLCJyZW1vdmVCb29rcyIsImJvb2tJbmRleCIsImJ0bkluZGV4Iiwic2hvd0Jvb2tsaXN0IiwiY2hlY2tMaWJyYXJ5IiwiY3NzVG9SZW1vdmUiLCJjc3NUb0FkZCIsInJlbW92ZSIsInNpZGVCIiwicHVzaCIsInNob3dNZXNzYWdlQm9hcmQiLCJub2RlVGl0bGUiLCJub2RlQXV0aG9yIiwibm9kZVBhZ2VzIiwibm9kZUJvb2tOb3RlIiwiY2hlY2tlZCIsImJvb2tzUmVhZCIsImFkZEJvb2tUb0xpYnJhcnkiLCJjbGVhckZvcm1TaGVldCJdLCJzb3VyY2VSb290IjoiIn0=